!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("rcg",[],e):"object"==typeof exports?exports.rcg=e():t.rcg=e()}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){"use strict";r.r(e),r.d(e,"core",(function(){return n}));var n=new(function(){function t(){}return t.prototype.isNull=function(t){return null===t},t.prototype.toArray=function(t){return Array.from(t)},t.prototype.isArray=function(t){return Array.isArray(t)},t.prototype.isString=function(t){return"string"==typeof t},t.prototype.isBoolean=function(t){return"boolean"==typeof t},t.prototype.isNumber=function(t){return"number"==typeof t},t.prototype.isFunction=function(t){return"function"==typeof t},t.prototype.isObject=function(t){return t&&"object"==typeof t},t.prototype.apply=function(t,e,r){if(r&&this.apply(t,r),t&&e&&this.isObject(e))for(var n in e)this.isArray(e[n])?t[n]=this.clone(e[n]):this.isObject(e[n])?this.apply(t[n]=t[n]||{},e[n]):t[n]=e[n];return t},t.prototype.clone=function(t){var e=this;return this.isArray(t)?t.slice(0):this.isObject(t)&&t.clone?t.clone():this.isObject(t)?Object.keys(t).reduce((function(r,n){return r[n]=e.clone(t[n]),r}),{}):t},t.prototype.join=function(t,e,r){return t.reduce((function(t,r){return t.append(r[e||"id"])}),[]).join(void 0===r?"-":r||"")},t.prototype.createStringBuilder=function(t){return{value:t||"",append:function(t){return this.value=this.value+t,this},appendLine:function(t){return this.value=this.value+(t||"")+"\n",this}}},t.prototype.$=function(t,e){var r,n=document.getElementById(t);return n||((r=e?e.querySelectorAll(t):document.querySelectorAll(t)).length?r.toArray():null)},t.prototype.build=function(t,e,r){var n=this.isString(e)?{innerHTML:e}:e,o=this.apply(document.createElement(t),n);return r?o.firstElementChild:o},t.prototype.parseQueryString=function(){return location.search.slice(1).split("&").reduce((function(t,e){return t[e.split("=")[0]]=e.split("=")[1]||"",t}),{})},t.prototype.config=function(t){return{write:function(e,r){return localStorage.setItem("{0}.{1}".format(t,e),r),this},read:function(e){return localStorage.getItem("{0}.{1}".format(t,e))}}},t.prototype.getValue=function(t,e){return t.split(/\.|\[|\]/).reduce((function(t,e){if(""===e)return t;if("this"===e)return t;var r=e,o=e.indexOf("|")>-1,i=[];if(o){var u=String.trimValues(e.split("|"));r=u[0],i=String.trimValues(u[1].split(","))}var a=t[r];return void 0===a&&t.outerScope&&(a=n.getValue(r,t.outerScope)),null!=a?o?a.__proto__[i[0]].apply(a,i.slice(1)):a:t===self?"":self}),e||self)},t}());String.leftPad=function(t,e,r){var n=""+t;for(null!=r&&""!==r||(r=" ");n.length<e;)n=r+n;return n},String.trimValues=function(t){return t.map((function(t){return t.trim()}))},String.prototype.format=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1]||self,o=function(t,e,o){var i=String.trimValues(e).reduce((function(t,e){return t.push("@"==e.charAt(0)?n.getValue(e.slice(1),r):e),t}),o);return t.apply(r,i)};return this.replace(/\{(\d+|[^{]+)\}/g,(function(e,i){var u,a=String.trimValues(i.split(":")),c=a[0],s=a[1];if(/^\d+/.test(c)){var l=String.trimValues(c.split("|")),f=~~l[0],p=0==l.length?"data":["data"].concat(l.slice(1)).join("|"),d={data:t[f],outerScope:r};u=n.getValue(p,d)}else u=n.getValue(c,r);if(n.isFunction(u))return o(u,s?s.split(/\s|\;/):[],[]);if(s){var h=String.trimValues(s.split(/=>/)),m=h[0],g=h[1];return o(n.getValue(m,r),g?g.split(/\s|\;/):[],[u])}return u}))},String.prototype.replaceAll=function(t,e){return this.split(t).join(e)},String.prototype.fixDate=function(){return this.split(" ")[0]},String.prototype.fixTime=function(){return this.split(" ")[1]},String.prototype.fixYear=function(){return this.fixDate().split("/")[2]},String.prototype.paddingLeft=function(t){return(t+this).slice(-t.length)},String.prototype.merge=function(t){return this.replace(/{([^{]+)?}/g,(function(e,r){if(r.indexOf(":")>0){var o=r.split(":");return n.getValue(o[0],t)(n.getValue(o[1],t),t)}var i=n.getValue(r,t);return"function"==typeof i?i(t):i}))},String.prototype.toXmlDocument=function(){return(new DOMParser).parseFromString(this,"text/xml")},String.prototype.htmlDecode=function(){return(new DOMParser).parseFromString(this,"text/html").documentElement.textContent},Array.prototype.remove=function(t){var e=this.indexOf(t);return-1!=e&&this.splice(e,1),this},Array.prototype.add=function(t){return this.push(t),t},Array.prototype.append=function(t){return this.push(t),this},Array.prototype.select=function(t){return n.isString(t)?this.map((function(e){return e[t]})):this.map(t)},Array.prototype.item=function(t,e,r){return this.filter((function(r){return r[t]==e}))[0]||r},Array.prototype.contains=function(t,e){return this.item(t,e)},Array.prototype.lastItem=function(){return this[this.length-1]},Array.prototype.where=function(t){return n.isFunction(t)?this.filter(t):n.isObject(t)?this.filter(new Function("a",Object.keys(t).reduce((function(e,r,o){return e+(o>0?" && ":"")+((i=t[r])instanceof RegExp?"{1}.test(a.{0})".format(r,i):n.isString(i)?"a.{0} === '{1}'".format(r,i):"a.{0} === {1}".format(r,i));var i}),"return "))):this},Array.prototype.sortBy=function(t,e){var r=[],n=t.split(",").map((function(t,e){var n=t.split(" ");return r[e]=n[1]&&"DESC"==n[1].toUpperCase()?-1:1,n[0]}));return r[0]=e?-1:1,this.sort((function(t,e){var o=0,i=function(t,e){var u=t[n[o]],a=e[n[o]];return u<a?-1*r[o]:u>a?1*r[o]:++o<n.length?i(t,e):0};return i(t,e)})),this},Array.prototype.orderBy=function(t){var e=n.isString(t)?function(e){return e[t]}:t;return this.map((function(t){return t})).sort((function(t,r){var n=e(t),o=e(r);return n<o?-1:n>o?1:0}))},Array.prototype.distinct=function(t){void 0===t&&(t="");var e=n.isString(t)?function(e){return t?e[t]:e}:t,r=[];return this.forEach((function(t){var n=e(t);-1==r.indexOf(n)&&r.push(n)})),r},Array.prototype.groupBy=function(t){return this.reduce((function(e,r){var n=r[t];return(e[n]=e[n]||[]).push(r),e}),{})},Array.prototype.toGroupWrapper=function(t){var e=this,r=function(n,o,i){return t[i]={},e.distinct((function(t){return t[n]})).forEach((function(r){t[i][r]=e.reduce((function(t,e){return e[n]==r?t+e[o]:t}),0)})),r};return r},Array.prototype.sum=function(t){return this.reduce((function(e,r){return e+r[t]}),0)},Array.prototype.toDictionary=function(t,e){return this.reduce((function(r,n){return r[n[t]]=e?n[e]:n,r}),{})},NodeList.prototype.toArray=function(){return Array.from(this)}},function(t,e,r){"use strict";r.r(e);var n=r(2),o=new Map,i=-1;e.default={subscribe:function(t,e){o.has(t)||o.set(t,[]);var r=(++i).toString();return o.get(t).push({token:r,func:e}),r},publish:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return!!o.has(t)&&(setTimeout((function(){for(var r,i=o.get(t),u=i?i.length:0;u--;)(r=i[u]).func.apply(r,Object(n.a)([t],e))}),0),!0)},unsubscribe:function(t){for(var e in o.keys){var r=o.get(e);if(r)for(var n=0,i=r.length;n<i;n++)if(r[n].token===t)return r.splice(n,1),t}return!1},TOPICS:{VIEW_CHANGE:"view:change",VALUE_CHANGE:"value:change",MUNICIPIO_CHANGE:"municipio:change",WINDOW_SCROLL:"window.scroll",WINDOW_RESIZE:"window.resize",NOTIFICATION:"notification.show"}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));function n(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],u=0,a=i.length;u<a;u++,o++)n[o]=i[u];return n}},function(t,e,r){"use strict";r.r(e),r.d(e,"merge",(function(){return i})),r.d(e,"executeTemplate",(function(){return a})),r.d(e,"fillTemplate",(function(){return u}));var n=r(2),o=r(0);function i(t,e,r){var n=function(t,n,i){var u=String.trimValues(n).reduce((function(t,r){return t.push("@"==r.charAt(0)?o.core.getValue(r.slice(1),e):r),t}),i);return r&&u.push(r),t.apply(e,u)};return t.replace(/{([^{]+)?}/g,(function(t,r){if(r.indexOf(":")>0){var i=String.trimValues(r.split(":")),u=o.core.getValue(i[0],e),a=String.trimValues(i[1].split(/=>/)),c=a[0],s=a[1],l=s?String.trimValues(s.split(/\s|\;/)):[];return n(o.core.getValue(c,e),l,[u])}var f=String.trimValues(r.split(/=>/)),p=f[0],d=f[1],h=o.core.getValue(p,e);return o.core.isFunction(h)?n(h,d.split(/\s|\;/),[]):h}))}function u(t,e){var r=t,a=r.querySelectorAll("[xfor]").toArray(),c=a.reduce((function(t,e){return t.concat(o.core.$("[xbind]",e))}),Object(n.a)(a)),s=r.querySelectorAll("[xbind]").toArray().filter((function(t){return!c.includes(t)}));return r.attributes.getNamedItem("xbind")&&s.push(r),s.forEach((function(t){if(t.attributes.getNamedItem("xif")){var r=new Function("ctx","return {0};".format(t.attributes.getNamedItem("xif").value).replaceAll("@","this."));t.style.display=r.apply(e)?"":"none"}o.core.toArray(t.attributes).where({value:/{[^{]+?}/g}).map((function(t){return t.value=i(t.value,e)})),o.core.toArray(t.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach((function(t){return t.textContent=i(t.textContent,e,t)})),String.trimValues(t.attributes.getNamedItem("xbind").value.split(";")).forEach((function(r){if(""!==r){var n=String.trimValues(r.split(":")),i=n[0],u=n[1],a=String.trimValues(u.split(/=>/)),c=a[0],s=a[1],l=o.core.getValue(c,e);if(o.core.isFunction(l)){var f=String.trimValues(s.split(/\s|#/)).reduce((function(t,r){return t.push("@"==r.charAt(0)?o.core.getValue(r.slice(1),e):r),t}),[]);f.push(t),l=l.apply(e,f)}i&&(t[i]=l)}}))})),a.map((function(t){var r=String.trimValues(t.attributes.getNamedItem("xfor").value.split(" in ")),n=r[0],i=r[1],a=o.core.getValue(i,e);return a&&a!=window&&a.map((function(r,i){var a={index:i,outerScope:e};a[n]=o.core.clone(r);var c=u(t.cloneNode(!0),a);t.parentNode.insertBefore(c,t)})),t})).forEach((function(t){return t.parentNode.removeChild(t)})),t}function a(t,e,r){var n=o.core.isString(t)?o.core.$(t):t,i=e.reduce((function(t,e,o){var i={index:o,data:e,node:u(n.cloneNode(!0),e)};return t.nodes.push(i),r||t.html.push(i.node.outerHTML.replace(/xbind="[^"]*"/g,"")),t}),{nodes:[],html:[]});return r?i.nodes:i.html.join("")}},function(t,e,r){var n=r(0);n.ajax=r(5),n.commands=r(6),n.declarative=r(7),n.dialogs=r(8),n.include=r(9),n.paginator=r(10),n.pubSub=r(1),n.templates=r(3),n.reportLoader=r(11),n.reportEngine=r(12),n.jsReportLoader=r(13),n.jsReportEngine=r(14),n.version=r(15),t.exports=n},function(t,e,r){"use strict";r.r(e),r.d(e,"ajax",(function(){return n}));var n={get:function(t,e){return new Promise((function(r,o){var i=n.createXMLHttpRequest();i.open("GET",t,!0),e&&e(i),i.onreadystatechange=function(){4==i.readyState&&r(i.responseText)},i.onerror=function(t){o(t)},i.send(null)}))},post:function(t,e,r){return new Promise((function(o,i){var u=n.createXMLHttpRequest();u.open("POST",t,!0),r?r(u):u.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset:ISO-8859-1"),u.onreadystatechange=function(){4==u.readyState&&o(u.responseText)},u.send(e)}))},callWebMethod:function(t,e,r){var o=n.createXMLHttpRequest();o.open("POST",t,!0),o.onreadystatechange=function(){4==o.readyState&&r(o.responseText)},o.setRequestHeader("Content-type","application/json; charset=utf-8"),o.send(e)},createXMLHttpRequest:function(){return new XMLHttpRequest}}},function(t,e,r){"use strict";function n(t){var e={getDocument:function(){return t},undos:new Array,redos:new Array,clear:function(){e.undos.length=0,e.redos.length=0},executeCommad:function(r){try{e.undos.push(r.execute(t)),e.redos.length=0}catch(t){console.error(t)}},undo:function(){e.undos.length>0&&e.redos.push(e.undos.pop().undo(t))},redo:function(){e.redos.length>0&&e.undos.push(e.redos.pop().execute(t))}};return e}r.r(e),r.d(e,"CommandManager",(function(){return n}))},function(t,e,r){"use strict";r.r(e),r.d(e,"addEventListeners",(function(){return a}));var n=r(2),o=r(0),i=r(1),u=["[on-click]","[on-publish]","[route-link]","[on-change]"];function a(t,e,r){var a={innerHTML:function(t,e){return t.innerHTML=e},className:function(t,e){return t.className=e}};u.forEach((function(u,c){t.querySelectorAll(u).toArray().concat([t]).forEach((function(t){var s=u.replace("[","").replace("]","");if(t.attributes.getNamedItem(s)){var l=t.attributes.getNamedItem(s).value,f=l.split(":");if(0!==c){if(1===c){var p=o.core.getValue(f[0],i.default);p=p===window?f[0]:p,i.default.subscribe(p,(function(i,u){var c=f[1];if(c){var s=a[c]||e[c]||o.core.getValue(c,r);s&&s.apply(r,Object(n.a)([t,u],f.slice(2)))}else a.innerHTML(t,u)}))}if(2===c&&(t.onclick=function(t){return!1}),3===c){var d="SELECT"===t.tagName;if("publish"===l)return void(d?t.onchange=function(){return i.default.publish(i.default.TOPICS.VALUE_CHANGE,t)}:t.oninput=function(){return i.default.publish(i.default.TOPICS.VALUE_CHANGE,t)});var h=e[l]||o.core.getValue(l,r);d?t.onchange=function(){return h.apply(r,[t])}:t.oninput=function(){return h.apply(r,[t])},t.onblur=function(){return h.apply(r,[t])}}}else{var m=e[f[0]]||o.core.getValue(f[0],r);t.onclick=function(e){var n=f.slice(1).reduce((function(t,e){return t.push("@"==e.charAt(0)?o.core.getValue(e.slice(1),r):e),t}),[t,e]);return m.apply(r,n)}}}}))}))}},function(t,e,r){"use strict";r.r(e),r.d(e,"DialogHelper",(function(){return n}));var n=function(){function t(){}return t.getWrapper=function(t){var e=document.getElementById(t),r={container:e,title:e.querySelector(".js-title"),body:e.querySelector(".js-content"),closeButton:e.querySelector(".js-close-button"),acceptButton:e.querySelector(".js-accept-button"),close:function(){return e.style.display="none",r},show:function(t){return t&&(r.acceptButton.onclick=function(){t(r)}),e.style.display="block",r},init:function(t){return t&&t(r),r},setTitle:function(t){return r.title.innerHTML=t,r},setBody:function(t){return t.tagName?(r.body.innerHTML="",r.body.appendChild(t)):r.body.innerHTML=t,r},disableClickOutside:function(){return r.container.onclick=function(){},r}};return r.acceptButton.onclick=r.close,r.closeButton.onclick=r.close,r.container.onclick=function(t){t.target===r.container&&r.close()},r},t}()},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var n=[];function o(t){return new Promise((function(e){if(n.indexOf(t.toLowerCase())>-1)e();else{var r=document.createElement("script");r.type="text/javascript",r.onload=function(){n.push(t.toLowerCase()),e((function(){document.getElementsByTagName("head")[0].removeChild(r),n.remove(t.toLowerCase())}))},r.src=t,document.getElementsByTagName("head")[0].appendChild(r)}}))}},function(t,e,r){"use strict";r.r(e),r.d(e,"Paginator",(function(){return n}));var n=function(){function t(){}return t.paginate=function(t,e,r,n){void 0===e&&(e=1),void 0===r&&(r=10);var o=Math.ceil(t.length/r);e<1?e=1:e>o&&(e=o);var i=(e-1)*r,u=Math.min(i+r-1,t.length-1);return{totalItems:t.length,currentPage:e,pageSize:r,totalPages:o,startIndex:i,endIndex:u,allItems:t,visibleItems:t.slice(i,u+1),title:n,getChecked:function(){return t.where({__checked:!0}).map((function(e,r){return{index:t.indexOf(e),item:e}}))}}},t}()},function(t,e,r){"use strict";r.r(e),r.d(e,"ReportEngine",(function(){return i}));var n=r(0),o=r(3),i=function(){function t(){this.BS={},this.module_ReportEngine_Copy=function(t,e){for(var r in e)if(e.hasOwnProperty(r)){if(t.hasOwnProperty(r)){e[r]=t[r];continue}if("_max_"===r||"_mim_"===r){var n=e[r];for(var o in n)n.hasOwnProperty(o)&&t.hasOwnProperty(o)&&(n[o]=t[o])}if("_values_"===r){var i=e[r];for(var o in i)i.hasOwnProperty(o)&&t.hasOwnProperty(o)&&(i[o]=[t[o]])}}},this.module_ReportEngine_Sum=function(t,e){for(var r in e)if(e.hasOwnProperty(r)){if(t.hasOwnProperty(r)){e[r]+=t[r];continue}if("_max_"===r||"_min_"===r){var n=e[r];for(var o in n)n.hasOwnProperty(o)&&t.hasOwnProperty(o)&&(n[o]="_max_"==r?t[o]>n[o]?t[o]:n[o]:t[o]<n[o]?t[o]:n[o])}if("_values_"===r){var i=e[r];for(var o in i)i.hasOwnProperty(o)&&t.hasOwnProperty(o)&&i[o].add(t[o])}}}}return t.prototype.__cloneRowTemplate=function(t){var e=t.cloneNode(!0);return t.parentNode.parentNode.deleteRow(t.rowIndex),e},t.prototype.__fillTemplate=function(t,e){var r=t.querySelectorAll("[xbind]").toArray();return t.attributes.getNamedItem("xbind")&&r.push(t),r.forEach((function(t){n.core.toArray(t.attributes).where({value:/{[^{]+?}/g}).map((function(t){return t.value=Object(o.merge)(t.value,e)})),n.core.toArray(t.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach((function(t){return t.textContent=Object(o.merge)(t.textContent,e,t)})),String.trimValues(t.attributes.getNamedItem("xbind").value.split(";")).forEach((function(r){if(""!==r){var o=String.trimValues(r.split(":")),i=String.trimValues(o[1].split(/\s|\,/)),u=n.core.getValue(i[0],e);if(n.core.isFunction(u)){var a=i.slice(1).reduce((function(t,r){return t.push("@"==r.charAt(0)?n.core.getValue(r.slice(1),e):r),t}),[e,t]);u=u.apply(e,a)}else if(i[1]){u=n.core.getValue(i[1],e)(u,i[2],e,t)}t[o[0]]=u}}))})),t},t.prototype.__mergeTemplate=function(t,e,r,n){var o=this;if(t.forEach)return t.forEach((function(t,i){o.__mergeTemplate(t,e,r[i],n)}));this.__fillTemplate(t,{BS:this.BS}),r.tag||"nofooter"==r.tag||(e.append(t.outerHTML.replace(/xbind="[^"]*"/g,"")),n&&n({sb:e,section:r}))},t.prototype.module_ReportEngine_processAll=function(t){var e=this,r=document.createDocumentFragment();if(r.appendChild(n.core.build("div",{innerHTML:t.ReportTemplate},!1)),t.DetailTemplate=this.__cloneRowTemplate(r.querySelector(t.DetailTemplateSelector)),t.HideTotal){var o=r.querySelector(t.TotalTemplateSelector);o.parentNode.removeChild(o)}else t.TotalTemplate=this.__cloneRowTemplate(r.querySelector(t.TotalTemplateSelector));t.GroupsTemplates=[],t.GroupsTemplates=t.Grupos.map((function(t){return e.__cloneRowTemplate(r.querySelector(t.selector))}));var i=this,u=-1;function a(){t.Grupos.forEach((function(e,r){if(!(r<u)){var o=t.Grupos[r];if(o.header){var a=n.core.getValue(o.header,i)(o.current,o.name);"hidden;"!=a&&(a.text?c.append("<tr {0}>{1}</tr>".format(a.attributes,a.text)):a.row?i.BS.reportDefinition.dom_tbody.appendChild(a.row):c.append('<tr class="group-header">{0}</tr>'.format(a))),t.RepeatHeadersAfter==r&&t.RepeatHeaders.forEach((function(e){""!=e&&c.append(t.Headers[e].html)}))}}}))}var c=n.core.createStringBuilder("");if(t.OnStart(t.DataSet),t.DataSet.forEach((function(r,n){0==n&&a(),t.OnRow(r),t.Grupos.every((function(t){return t.test(r)}))?t.Grupos.forEach((function(t){t.sum(r)})):(t.Grupos.some((function(n,o){if(!n.test(r)){u=o;var i=t.GroupsTemplates.map((function(t){return t}));i.splice(0,o),i.reverse();var a=t.Grupos.map((function(t){return t}));return a.splice(0,o),a.reverse(),e.__mergeTemplate(i,c,a,t.OnGroupFooter),t.Grupos.forEach((function(t,e){e>=o?(t.init(r),u=o):t.sum(r)})),!0}return!1})),t.OnRowEnd(r),a()),t.HideDetail||e.__mergeTemplate(t.DetailTemplate,c,{name:"detail"},t.g)})),t.DataSet.length>0){this.BS.previous=this.BS.data;var s=t.GroupsTemplates.map((function(t){return t}));s.reverse(),t.HideTotal||s.push(t.TotalTemplate);var l=t.Grupos.map((function(t){return t}));l.reverse(),l.push({name:"summary"}),this.__mergeTemplate(s,c,l,t.OnGroupFooter)}return r.querySelector(t.ReportTableSelector).innerHTML.replace("<tbody>","<tbody>"+c.value)},t.prototype.fromReportDefinition=function(t,e,r){var o=this,i=this;this.BS={reportDefinition:t},t.Iteratefn&&e.forEach(t.Iteratefn),t.orderBy&&e.sortBy(t.orderBy,!1);var u=JSON.parse(t.summary||"{}");var a={DataSet:e,HideDetail:"true"==t.hideDetail||!1,HideTotal:0==t.groups.length||"true"==t.HideTotal||!1,ReportTemplate:t.html,ReportTableSelector:"#"+t.tableId,DetailTemplateSelector:"#"+t.details[0].id,TotalTemplateSelector:0==t.groups.length?"":"#"+t.groups.lastItem().id,Grupos:t.groups.where((function(e,r){return r<t.groups.length-1})).map((function(t,e){return{name:"G"+(e+1),selector:"#"+t.id,key:t.key,tag:t.tag||"",current:"",header:t.header,data:n.core.clone(u),init:function(t){var e=t[this.key].toString(),r=i.BS[this.name];r.all[e]=r.all[e]||[],r.all[e].push(t),r.recordCount=1,i.module_ReportEngine_Copy(t,this.data)},sum:function(t){var e=t[this.key].toString(),r=i.BS[this.name];r.all[e]=r.all[e]||[],r.all[e].push(t),r.recordCount+=1,i.module_ReportEngine_Sum(t,this.data)},test:function(t){return t[this.key]==this.current}}}))||[],OnGroupFooter:t.OnGroupFooter,Headers:t.headers,RepeatHeaders:(t.repeatHeader||"").split(","),RepeatHeadersAfter:t.repeatHeaderAfter,OnRow:function(e){i.BS.recordCount+=1,i.BS.previous=i.BS.data||e,i.BS.data=e,a.Grupos.forEach((function(t,e){i.BS[t.name].data=Object.create(t.data)})),i.module_ReportEngine_Sum(e,i.BS.G0),t.onRowfn&&new Function("ctx",t.onRowfn)(o.BS)},OnStart:function(e){i.BS={recordCount:0,G0:n.core.clone(u),dataSet:e,reportDefinition:i.BS.reportDefinition},a.Grupos.forEach((function(t,r){t.current=e&&e[0]?e[0][t.key]:"",i.BS[t.name]={recordCount:0,all:{}}})),t.onStartfn&&t.onStartfn(i.BS)},OnRowEnd:function(e){a.Grupos.forEach((function(t){t.current=e[t.key]})),t.onRowEndfn&&new Function("ctx",t.onRowEndfn)(i.BS)},PrintReport:function(t){return t&&t(o.module_ReportEngine_processAll(a)),o}};return a.PrintReport(r)},t}()},function(t,e,r){"use strict";r.r(e),r.d(e,"loader",(function(){return n}));var n={load:function(t){var e={headers:[],groups:[],details:[]},r=[{columns:[]}],n="",o="";function i(t){return t&&t.trim().startsWith("@")?e[t.trim().split("@")[1].trim()]||"":t?t.trim():""}function u(t){for(var e=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,r={},n=e.exec(t);null!=n;)r[n[1].trim()]=i(n[2].trim().replace(/^'([^']*)'$/g,"$1")),n=e.exec(t);return r}function a(t){var e=u(t);return e.columns=[],e}function c(t){var e=[];return Object.keys(t).filter((function(e){return"columns"!=e&&"html"!=e&&t.hasOwnProperty(e)})).forEach((function(r){var n="className"==r?"class":r;e.push('{0}="{1}"'.format(n,i(t[r])))})),e.length>0?" "+e.join(" "):""}function s(t,e){if(!n&&!t.trim())return function(){};var i;if(/^(DEFINE|#|ADD_COL|CREATE|FUNCTION|END)/.test(t)){if(/^#/.test(t))return function(){};if(/^FUNCTION (\w.*)/.test(t)){var c=t.match(/^FUNCTION (\w.*)$/);return n=c[1].trim(),o="",function(){}}if(/^END/.test(t)){var s=o,l=n;return n=o="",function(t){t[l]=new Function("ctx",s)}}if(/^ADD_COL /.test(t)){c=t.match(/ADD_COL (.*)$/);return i=c,function(t){r[r.length-1].columns.push(u(i[1]))}}if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(t)){c=t.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/);return function(){var t=c;return function(e){e[t[1].trim()]=t[2].trim()}}()}if(/^CREATE\s\s*(\w*) (.*)$/.test(t))return"header"==(c=t.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var t=c;return function(e){e.headers.push(a(t[2])),r=e.headers}}():"group"==c[1]?function(){var t=c;return function(e){e.groups.push(a(t[2])),r=e.groups}}():"detail"==c[1]?function(){var t=c;return function(e){e.details.push(a(t[2])),r=e.details}}():function(){var t=c;return function(e){e[t[1]]=t[2]}}();throw new Error("Tabbly : Unrecognized text after DEFINE")}if(n)return o+=e,o+="\n",function(){};throw new Error("Tabbly : Unrecognized text")}return t.split("\n").forEach((function(t){s(t.trim(),t)(e)})),e.html=function(){function t(t,e,r){var n="",o=r?"th":"td";return(t||[]).forEach((function(t,r){var u="";u+="\n      <tr{0}>".format(c(t)),t.columns.forEach((function(t,e){u+="\n        <{2}{0}>{1}</{2}>".format(c(t),i(t.html),o)})),u+="\n      </tr>",t.html=u,e&&e.indexOf(r.toString())>-1||(n+=u)})),n}return'<div id="{3}">\n  <table class= "w3-table-all" style = "width:100%;" id="table-{3}" >\n     <thead>{0}    </thead>\n    <tbody>{1}{2}    </tbody>\n  </table>\n</div>'.format(t(e.headers,(e.hiddenHeaders||"").split(","),!0),t(e.details),t(e.groups),e.tableId||"")}(),e}}},function(t,e,r){"use strict";r.r(e),r.d(e,"ReportEngine",(function(){return o}));var n=r(0),o=function(){function t(){this.BS={}}return t.prototype.generateReport=function(t,e,r){var o=this;r.clear(),r.message({type:"report.begin"});var i=t,u=i.parseData?i.parseData(i,e,r.message):e;r.message({type:"report.log.message",text:"Inicializando..."});var a=function(t,e){e.BS=o.BS,r.send(t.format(e))};function c(){m.forEach((function(t,e){if(!(e<l))return r.message({type:"report.sections.group.header",value:t.id}),t.definition.header?a(t.definition.header,t):t.definition.headerValueProvider?r.send(t.definition.headerValueProvider(t)):void 0}))}function s(t){var e=m.map((function(t){return t}));t&&e.splice(0,t),e.reverse().forEach((function(t){return r.message({type:"report.sections.group.footer",value:t.id}),t.definition.footer?a(t.definition.footer,t):t.definition.footerValueProvider?r.send(t.definition.footerValueProvider(t)):void 0}))}var l=-1,f=function(){var t=JSON.parse(i.summary||"{}");return i.onInitSummaryObject?i.onInitSummaryObject(t):t}(),p=(i.sections||[]).where({type:"header"}),d=(i.sections||[]).where({type:"total"}),h=((i.sections||[]).where({type:"footer"}),i.details||[]),m=i.groups.map((function(t,e){return{name:"G"+(e+1),id:t.id,rd:i,definition:t,current:"",data:n.core.clone(f),init:function(t){var e=t[this.definition.key].toString(),r=o.BS[this.name];r.all[e]=r.all[e]||[],r.all[e].push(t),r.recordCount=1,!1!==this.__resume&&(this.__resume||(this.__resume=Object.keys(this.data).length>0))&&o.copy(t,this.data)},sum:function(t){var e=t[this.definition.key].toString(),r=o.BS[this.name];r.all[e]=r.all[e]||[],r.all[e].push(t),r.recordCount+=1,!1!==this.__resume&&o.sum(t,this.data)},test:function(t){return t[this.definition.key]==this.current}}}))||[];o.BS={reportDefinition:i,mediator:r},i.iteratefn&&(r.message({type:"report.log.message",text:"Inicializando elementos..."}),u.forEach(i.iteratefn)),i.orderBy&&(r.message({type:"report.log.message",text:"Ordenando datos..."}),u.sortBy(i.orderBy,!1)),o.BS={recordCount:0,G0:n.core.clone(f),dataSet:u,reportDefinition:i,mediator:r},m.forEach((function(t,e){t.current=u&&u[0]?u[0][t.definition.key]:"",o.BS[t.name]={recordCount:0,all:{}}})),i.onStartfn&&i.onStartfn(o.BS),[i.sections,i.details,i.groups].reduce((function(t,e){return t.concat(e)}),[]).map((function(t){t.valueProviderfn&&(t.valueProvider=n.core.getValue(t.valueProviderfn,{BS:o.BS}),delete t.valueProviderfn),t.footerValueProviderfn&&(t.footerValueProvider=n.core.getValue(t.footerValueProviderfn,{BS:o.BS}),delete t.footerValueProviderfn),t.headerValueProviderfn&&(t.headerValueProvider=n.core.getValue(t.headerValueProviderfn,{BS:o.BS}),delete t.headerValueProviderfn)})),r.message({type:"report.render.rows"}),r.message({type:"report.log.message",text:"Generando informe..."}),p.forEach((function(t){return r.message({type:"report.sections.header",value:t}),t.template?a(t.template,t):t.valueProvider?r.send(t.valueProvider(t)):void 0})),u.length>0&&c(),u.forEach((function(t,e){if(o.BS.recordCount++,o.BS.isLastRow=u.length===o.BS.recordCount,o.BS.isLastRowInGroup=o.BS.isLastRow,o.BS.percent=o.BS.recordCount/u.length*100,o.BS.previous=o.BS.data||t,o.BS.data=t,m.forEach((function(t,e){o.BS[t.name].data=Object.create(t.data)})),o.sum(t,o.BS.G0),i.onRowfn&&i.onRowfn(o.BS),r.message({type:"report.render.row",text:o.BS.percent.toFixed(1)+" %",value:o.BS.percent}),m.every((function(e){return e.test(t)}))?m.forEach((function(e){e.sum(t)})):(m.some((function(e,r){return!e.test(t)&&(s(l=r),m.forEach((function(e,n){n>=l?(e.init(t),l=r):e.sum(t)})),!0)})),m.forEach((function(e){e.current=t[e.definition.key]})),i.onGroupChangefn&&i.onGroupChangefn(o.BS),r.message({type:"report.sections.group.change",value:m}),c()),m.length&&!o.BS.isLastRow){var n=u[o.BS.recordCount];o.BS.isLastRowInGroup=!m.every((function(t){var e=t.definition.key;return n[e]===o.BS.data[e]}))}h.forEach((function(t){return r.message({type:"report.sections.detail",value:t.id}),t.template?a(t.template,t):t.valueProvider?r.send(t.valueProvider(t)):void 0}))})),u.length>0&&(o.BS.previous=o.BS.data,s()),d.forEach((function(t){return r.message({type:"report.sections.total",value:t.id}),t.template?a(t.template,t):t.valueProvider?r.send(t.valueProvider(t)):void 0})),r.message({type:"report.render.end"}),r.message({type:"report.end"}),r.flush()},t.prototype.merge=function(t,e){return t.replace(/{([^{]+)?}/g,(function(t,r){if(r.indexOf(":")>0){var o=r.split(":");return o[0]=n.core.getValue(o[0],e),o[1]=n.core.getValue(o[1],e),o[0](o[1],e)}var i=n.core.getValue(r,e);return"function"==typeof i?i(e):i}))},t.prototype.copy=function(t,e){Object.keys(e).map((function(r){e[r]=t[r]}))},t.prototype.sum=function(t,e){Object.keys(e).map((function(r){e[r]+=t[r]}))},t.prototype.compute=function(t,e){return t.reduce((function(t,r){return t+r[e]}),0)},t.prototype.group=function(t,e){var r=t,n=function(t,o){return r.distinct((function(e){return e[t]})).forEach((function(n){e[n]=r.reduce((function(e,r,i,u){return r[t]==n?e+r[o]:e}),0)})),n};return n},t}()},function(t,e,r){"use strict";r.r(e),r.d(e,"loader",(function(){return n}));var n={load:function(t){var e={sections:[],groups:[],details:[]},r={},n="",o="",i=!1;function u(t){return t&&t.trim().startsWith("@")?e[t.trim().split("@")[1].trim()]||"":t?t.trim():""}function a(t){for(var e=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,r={},n=e.exec(t);null!=n;)r[n[1].trim()]=u(n[2].trim().replace(/^'([^']*)'$/g,"$1")),n=e.exec(t);return r}return t.split("\n").forEach((function(t){!function(t,e){if(!n&&!t.trim())return function(){};var u;if(!/DEFINE|#|CREATE|SET|FUNCTION|END/.test(t)){if(n)return o+=e,o+="\n",function(){};throw new Error("Tabbly : Unrecognized text")}if(/^#/.test(t))return function(){};if(/^SET (\w.*)/.test(t)){var c=t.match(/^SET (\w.*)$/);return i=!0,n=c[1].trim(),o="",function(){}}if(/^FUNCTION (\w.*)/.test(t)){var c=t.match(/^FUNCTION (\w.*)$/);return i=!1,n=c[1].trim(),o="",function(){}}if(/^END/.test(t)){var s=o,l=n;return n=o="",i?(i=!1,function(t){r[l]=s.trim()}):function(t){t[l]=new Function("ctx",s)}}if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(t)){c=t.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/);return u=c,function(t){t[u[1].trim()]=u[2].trim()}}if(!/^CREATE\s\s*(\w*) (.*)$/.test(t))throw new Error("Tabbly : Unrecognized text after DEFINE");return"section"==(c=t.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var t=c;return function(e){e.sections.push(a(t[2])),r=e.sections[e.sections.length-1]}}():"group"==c[1]?function(){var t=c;return function(e){e.groups.push(a(t[2])),r=e.groups[e.groups.length-1]}}():"detail"==c[1]?function(){var t=c;return function(e){e.details.push(a(t[2])),r=e.details[e.details.length-1]}}():void 0}(t.trim(),t)(e)})),e}}},function(t,e){t.exports="1.0"}])}));
//# sourceMappingURL=rcg.bundle.min.js.map