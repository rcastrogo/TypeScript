!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pol=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){var __core=require("./core");__core.ajax=require("./core.ajax"),__core.commands=require("./core.commands"),__core.declarative=require("./core.declarative"),__core.dialogs=require("./core.dialogs"),__core.events=require("./core.events"),__core.include=require("./core.include"),__core.paginator=require("./core.paginator"),__core.pubSub=require("./core.pub-sub"),__core.templates=require("./core.templates"),__core.reportLoader=require("./core.tabbly.engine"),__core.reportEngine=require("./core.tabbly.loader"),__core.jsReportLoader=require("./core.tabbly.v2.engine"),__core.jsReportEngine=require("./core.tabbly.v2.loader"),__core.controls={grid:require("./controls.editable-grid"),textViewer:require("./controls.text-viewer"),collapsibleBox:require("./controls.collapsible-box"),charts:require("./charts/charts")},__core.tre=require("./core.tree"),module.exports=__core},{"./charts/charts":3,"./controls.collapsible-box":6,"./controls.editable-grid":7,"./controls.text-viewer":8,"./core":16,"./core.ajax":10,"./core.commands":11,"./core.declarative":12,"./core.dialogs":13,"./core.events":14,"./core.include":15,"./core.paginator":17,"./core.pub-sub":18,"./core.tabbly.engine":19,"./core.tabbly.loader":20,"./core.tabbly.v2.engine":21,"./core.tabbly.v2.loader":22,"./core.templates":23,"./core.tree":24}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("./utils"),math_1=require("../math"),core_1=require("../core"),COLORS=(0,utils_1.createColors)(30),require=function(){function BarChart(width,height,data,o){var _this=this,width=(this.showBars=!0,this.showDots=!0,this.showLine=!0,this.showValues=!0,this.closeLines=!0,this.worldToScreenY=function(y){return y*_this.ratio*_this.bounds.height/100},this.getControl=function(){return _this.svg},this.fonts=[],this.currentFont={fontFamily:"Verdana",fontSize:"11px",textAnchor:"middle"},this.showBars=!o||null==o.showBars||o.showBars,this.showDots=!o||null==o.showDots||o.showDots,this.showLine=!o||null==o.showLine||o.showLine,this.showValues=!o||null==o.showValues||o.showValues,this.closeLines=!o||null==o.closeLines||o.closeLines,this.width=width,this.height=height,this.padding=o&&o.padding?o.padding:new math_1.Box(0,0,0,0),this.bounds=new math_1.Rectangle(this.padding.left,this.padding.top,this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom),'<svg viewbox ="0 0 {width} {height}">  <defs>    <clipPath id="JJJ">      <rect y="{bounds.top}"            x="{bounds.left}"            width="{bounds.width}"            height="{0}" />     </clipPath>  </defs>  <g class="lines"></g>  <g class="data" style="clip-path:url(#JJJ)"></g>  <g class="text"></g></svg>'.format(this.bounds.height-1,this));this.svg=core_1.core.build("div",width,!0),this.data=data.map(function(values,i){return{value:values[0],legend:values[1]||"",serie:values[2]||"",fill:values[3]||COLORS.next()}}),this.maxValue=1.05*this.data.reduce(function(a,d){return Math.max(d.value,a)},-1/0),this.ratio=100/this.maxValue,this.series=Object.entries(this.data.groupBy("serie")).map(function(group){return{key:group[0],text:group[0],fill:group[1][0].fill,rows:group[1]}}).where(function(s){return s.key}),this.legends=Object.entries(this.data.groupBy("legend")).map(function(group){var __rows=group[1],__color=__rows[0].fill;return _this.series.length&&__rows.forEach(function(r){return r.fill=__color}),{key:group[0],text:group[0],fill:__color,rows:__rows}}),this.calcLayout()}return BarChart.prototype.calcLayout=function(){function __computeBars(rows){rows.forEach(function(value,i,self){var __height=_this.worldToScreenY(value.value),__top=_this.bounds.top+_this.bounds.height-__height,__left=_this.bounds.left+__margin+__offset;value.bar=new math_1.Rectangle(__left,__top,__barWidth-__margin,__height),__offset+=__barWidth})}var _this=this,__totalBarWidth=this.bounds.width/this.data.length,__margin=.1*__totalBarWidth,__marginSerie=2*__margin,__barWidth=__totalBarWidth-__margin/this.data.length,__offset=0;this.series.length?(__barWidth-=__marginSerie*this.series.length/this.data.length,this.series.forEach(function(serie){serie.left=_this.bounds.left+__offset,__computeBars(serie.rows),__offset+=__marginSerie,serie.width=_this.bounds.left+__offset-serie.left,serie.right=_this.bounds.left+__offset-__marginSerie})):__computeBars(this.data),this.draw()},BarChart.prototype.draw=function(){this.drawAxisY(),this.drawVerticalLines(),this.drawAxisX(),this.drawBars(),this.drawLine(),this.drawSeries()},BarChart.prototype.drawAxisX=function(){var __html='<line x1="{0}" y1="{1}" x2="{2}" y2="{1}"      stroke="black"      stroke-width="2" />'.format(this.bounds.left-4,this.bounds.top+this.bounds.height,this.bounds.left+this.bounds.width+4);this.svg.querySelector("g.lines").insertAdjacentHTML("beforeend",__html)},BarChart.prototype.drawAxisY=function(){var _this=this,__html="";this.saveContext(),this.currentFont.textAnchor="end",(0,utils_1.niceScale)(0,this.maxValue,25).values.forEach(function(value){var __height=_this.worldToScreenY(value),__height=_this.bounds.top+_this.bounds.height-__height;__height<_this.bounds.top||(__html+='<line x1="{0}" y1="{1}" x2="{2}" y2="{1}"      stroke="silver"      stroke-width="1"/>'.format(_this.bounds.left-4,__height,_this.bounds.left+_this.bounds.width),_this.appendText(_this.bounds.left-6,4+__height,value.toFixed(0)))}),this.restoreContext(),__html+='<line x1="{0}" y1="{1}" x2="{0}" y2="{2}"      stroke="black"      stroke-width="2" />'.format(this.bounds.left,this.bounds.top-2,this.bounds.top+this.bounds.height+4),this.svg.querySelector("g.lines").insertAdjacentHTML("beforeend",__html)},BarChart.prototype.drawVerticalLines=function(){var _this=this,__template='<line x1="{0}" y1="{1}" x2="{0}" y2="{2}"      stroke="{3}"      stroke-width="1" />',__html=this.data.reduce(function(html,item,i){item=item.bar.centerPoint();return html+__template.format(item.x,_this.bounds.top-4,_this.bounds.top+_this.bounds.height+4,"silver")},"")+this.series.reduce(function(html,serie,i,self){return i==self.length-1?html:html+__template.format(serie.left+serie.width,_this.bounds.top-4,_this.bounds.top+_this.bounds.height,"black")},"");this.svg.querySelector("g.lines").insertAdjacentHTML("beforeend",__html)},BarChart.prototype.drawBars=function(){var _this=this,__html=this.data.reduce(function(html,item,i){var rec=item.bar;if(_this.appendText(rec.centerPoint().x,_this.bounds.top+_this.bounds.height+14,item.legend),_this.showBars)return _this.showValues&&_this.appendText(rec.centerPoint().x,rec.centerPoint().y,item.value),html+'<rect x="{0}" y="{1}" width="{2}" height="{3}"      stroke="black"      stroke-width="2"      fill="{4}"      data-index="{5}" />'.format(rec.left,rec.top,rec.width,rec.height,item.fill,i)},"");this.svg.querySelector("g.data").insertAdjacentHTML("beforeend",__html)},BarChart.prototype.drawSeries=function(){var _this=this;this.saveContext(),this.currentFont.fontSize="20px",this.currentFont.textAnchor="middle",this.series.forEach(function(serie,i){_this.appendText(serie.left+serie.width/2,_this.bounds.top+_this.bounds.height+40,serie.text)}),this.restoreContext()},BarChart.prototype.drawLine=function(){function __createDots(values,extra){return _this.showLine&&_this.showValues&&values.forEach(function(item,i){var rec=item.bar;_this.appendText(rec.centerPoint().x,rec.top-12,item.value)}),extra=values.map(function(v){return v.bar}).map(function(r){return new math_1.Vector2(r.centerPoint().x,r.top)}).concat(_this.closeLines?extra:[]),extra=utils_1.PathBuilder.createPath(extra,.1,_this.closeLines),extra='<path d="{0}" fill="{1}"      stroke-dasharray=""      stroke="{2}"      stroke-width="2"/>'.format(extra,_this.closeLines?COLORS.next():"none","black"),values=values.reduce(function(html,item,i){var rec=item.bar;return html+'<circle cx="{0}" cy="{1}" r="3"         stroke="black"        stroke-width="1"         fill="white" />'.format(rec.centerPoint().x,rec.top,item.fill)},""),(_this.showLine?extra:"")+(_this.showDots?values:"")}var extra,_this=this,__html="";__html=this.series.length?this.series.map(function(serie){var extra=[new math_1.Vector2(serie.right,_this.bounds.top+_this.bounds.height),new math_1.Vector2(serie.left,_this.bounds.top+_this.bounds.height)];return __createDots(serie.rows,extra)}).join(""):(extra=[new math_1.Vector2(this.bounds.left+this.bounds.width,this.bounds.top+this.bounds.height),new math_1.Vector2(this.bounds.left,this.bounds.top+this.bounds.height)],__createDots(this.data,extra)),this.svg.querySelector("g.data").insertAdjacentHTML("beforeend",__html)},BarChart.prototype.saveContext=function(){this.fonts.push(core_1.core.clone(this.currentFont))},BarChart.prototype.restoreContext=function(){this.fonts.length&&(this.currentFont=this.fonts.pop())},BarChart.prototype.appendText=function(x,y,text){this.svg.querySelector("g.text").insertAdjacentHTML("beforeend",'<text x="{0}" y="{1}" font-family="{fontFamily}"  font-size="{fontSize}" text-anchor="{textAnchor}">{2}</text>'.format(x,y,text,this.currentFont))},BarChart}();exports.default=require},{"../core":16,"../math":25,"./utils":5}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utils=exports.createDocument=exports.LineChart=exports.BarChart=void 0;var bars_1=require("./bars"),bars_1=(exports.BarChart=bars_1.default,require("./lines")),lines_2=(exports.LineChart=bars_1.default,require("./lines")),bars_1=(Object.defineProperty(exports,"createDocument",{enumerable:!0,get:function(){return lines_2.createDocument}}),require("./utils"));exports.utils=bars_1},{"./bars":2,"./lines":4,"./utils":5}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDocument=void 0;var utils_1=require("./utils"),math_1=require("../math"),core_1=require("../core"),core_pub_sub_1=require("../core.pub-sub"),COLORS=(0,utils_1.createColors)(30),require=function(){function LineChart(width,height,document,o){var _this=this,width=(this.getControl=function(){return _this.svg},this.worldToScreenX=function(x){return _this.bounds.left+x*_this.ratio.x*_this.bounds.width/100},this.worldToScreenY=function(y){return _this.bounds.top+_this.bounds.height-(y-_this.document.view.y.min)*_this.ratio.y*_this.bounds.height/100},this.screenToWorldX=function(x){x*=_this.width/_this.svg.clientWidth;return _this.document.view.x.min+100*(x-_this.bounds.left)/(_this.bounds.width*_this.ratio.x)},this.indexPoinAt=function(distance){var __i=-1;return _this.document.distances.forEach(function(d){distance<d||__i++}),__i},this.onMouseLeave=function(eventArg){_this.mouse.mouseDown&&(_this.mouse.mouseDown=!1,_this.mouse.drag=!1,_this.clearLayer())},this.onTouchEnd=function(eventArg){function __reset(){_this.mouse.mouseDown=!1,_this.mouse.drag=!1,_this.clearLayer(),eventArg.preventDefault()}_this.mouse.drag?(core_pub_sub_1.default.publish("msg/line_chart/range",{sender:_this,start:_this.mouse.dragStart<0?0:_this.mouse.dragStart,end:_this.mouse.dragEnd}),__reset(),_this.updateLayer()):(core_pub_sub_1.default.publish("msg/line_chart/tap",{sender:_this,x:_this.screenToWorldX(_this.mouse.mouseDownPosition.x)}),__reset())},this.onMouseUp=function(eventArg){function __reset(){_this.mouse.mouseDown=!1,_this.mouse.drag=!1,_this.clearLayer(),eventArg.preventDefault()}var __pos={x:eventArg.offsetX,y:eventArg.offsetY};if(_this.mouse.mouseDown&&_this.mouse.mouseDownPosition.x==__pos.x&&_this.mouse.mouseDownPosition.y==__pos.y)return core_pub_sub_1.default.publish("msg/line_chart/tap",{sender:_this,position:__pos,x:_this.screenToWorldX(__pos.x)}),__reset();_this.mouse.drag?(core_pub_sub_1.default.publish("msg/line_chart/range",{sender:_this,start:_this.mouse.dragStart<0?0:_this.mouse.dragStart,end:_this.mouse.dragEnd}),__reset(),_this.updateLayer()):__reset()},this.onTouchStart=function(eventArg){var event=window.document.createEvent("MouseEvent"),touch=eventArg.touches[0];event.initMouseEvent("mousedown",!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),touch.target.dispatchEvent(event),eventArg.preventDefault()},this.onMouseDown=function(eventArg){_this.mouse.mouseDown=!0,_this.mouse.mouseDownPosition={x:eventArg.offsetX,y:eventArg.offsetY},_this.mouse.dragStart=_this.mouse.dragEnd=_this.indexPoinAt(_this.screenToWorldX(_this.mouse.mouseDownPosition.x)),-1==_this.mouse.dragStart&&(_this.mouse.dragStart=0),eventArg.preventDefault()},this.onTouchMove=function(eventArg){var event=window.document.createEvent("MouseEvent"),touch=eventArg.touches[0];event.initMouseEvent("mousemove",!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),touch.target.dispatchEvent(event),eventArg.preventDefault()},this.onMouseMove=function(eventArg){var __pos={x:eventArg.offsetX,y:eventArg.offsetY};_this.mouse.drag=_this.mouse.mouseDown,_this.mouse.drag&&(_this.mouse.dragEnd=_this.indexPoinAt(_this.screenToWorldX(__pos.x)),-1==_this.mouse.dragEnd&&(_this.mouse.dragEnd=0),_this.updateLayerDrag(__pos)),eventArg.preventDefault()},this.states=[],this.currentFont={fontFamily:"Verdana",fontSize:"11px",textAnchor:"middle"},this.mouse={},this.width=width,this.height=height,this.padding=o&&o.padding?o.padding:new math_1.Box(0,0,0,0),this.bounds=new math_1.Rectangle(this.padding.left,this.padding.top,this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom),'<svg viewbox ="0 0 {width} {height}">  <defs>    <clipPath id="JJJ">      <rect y="0"            x="{bounds.left}"            width="{bounds.width}"            height="{0}" />     </clipPath>  </defs>  <g class="lines"></g>  <g class="data" style="clip-path:url(#JJJ)"></g>  <g class="layer" style="clip-path:url(#JJJ)">    <rect x="0" y="0" width="0" height="{0}" stroke="none"       fill="rgb(0,0,200,.5)" />  </g>  <g class="text"></g></svg>'.format(this.bounds.height+this.bounds.top-1,this));this.svg=core_1.core.build("div",width,!0),this.svg.onmousemove=this.onMouseMove,this.svg.onmouseup=this.onMouseUp,this.svg.onmousedown=this.onMouseDown,this.svg.onmouseleave=this.onMouseLeave,this.svg.ontouchstart=this.onTouchStart,this.svg.ontouchend=this.onTouchEnd,this.svg.ontouchmove=this.onTouchMove,this.layer=core_1.core.element("g.layer rect",this.svg),this.document=document,this.ratio=new math_1.Vector2(100/this.document.view.x.range,100/this.document.view.y.range),this.draw()}return LineChart.prototype.draw=function(){this.drawScaleY(),this.drawScaleX(),this.drawAxes(),this.drawLines()},LineChart.prototype.drawAxes=function(){var __html='<line x1="{0}" y1="{1}" x2="{2}" y2="{1}" stroke="black" stroke-width="2" />'.format(this.bounds.left-4,this.bounds.top+this.bounds.height,this.bounds.left+this.bounds.width+4)+'<line x1="{0}" y1="{1}" x2="{0}" y2="{2}" stroke="black" stroke-width="2" />'.format(this.bounds.left,this.bounds.top-2,this.bounds.top+this.bounds.height+4);this.svg.querySelector("g.lines").insertAdjacentHTML("beforeend",__html)},LineChart.prototype.drawScaleY=function(){var _this=this,__html="",__template='<line x1="{0}" y1="{1}" x2="{2}" y2="{1}" stroke="silver" stroke-width="1"/>',__right=this.bounds.left+this.bounds.width,__serie=(this.saveContext(),this.currentFont.fontSize="9px",this.currentFont.textAnchor="end",this.document.series[0]),__scale=(0,utils_1.niceScale)(__serie.view.min,__serie.view.max,8);__scale.values.forEach(function(value){var __y=__serie.transform?__serie.transform(_this,value):_this.worldToScreenY(value);__y<_this.bounds.top||(__html+=__template.format(_this.bounds.left-4,__y,__right),value="{0} {1}".format(value.toFixed(0),__serie.unit||"m"),_this.appendText(_this.bounds.left-6,__y+3,value))}),this.document.series[1]&&(this.currentFont.textAnchor="start",__serie=this.document.series[1],(__scale=(0,utils_1.niceScale)(__serie.view.min,__serie.view.max,8)).values.forEach(function(value){var __y=__serie.transform?__serie.transform(_this,value):_this.worldToScreenY(value);__y<_this.bounds.top||__y>_this.bounds.top+_this.bounds.height||(__html+=__template.format(__right-4,__y,__right),value="{0} {1}".format(value.toFixed(0),__serie.unit||"m"),_this.appendText(__right+2,__y+3,value))})),this.restoreContext(),this.svg.querySelector("g.lines").insertAdjacentHTML("beforeend",__html)},LineChart.prototype.drawScaleX=function(){var _this=this,__offsetX=(this.saveContext(),this.worldToScreenX(this.document.view.x.min)-this.bounds.left),__html="",__scale=(0,utils_1.niceScale)(this.document.view.x.min,this.document.view.x.max,Math.floor(this.bounds.width/50));this.currentFont.fontSize="9px",__scale.values.forEach(function(value){var __x_pos=_this.worldToScreenX(value)-__offsetX;__x_pos<_this.bounds.left||__x_pos>_this.bounds.left+_this.bounds.width||(__html+='<line x1="{0}" y1="{1}" x2="{0}" y2="{2}" stroke="gray" stroke-width="1" />'.format(__x_pos,_this.bounds.top-4,_this.bounds.top+_this.bounds.height+4),_this.appendText(__x_pos,_this.bounds.top+_this.bounds.height+12,"{0} km".format((value/1e3).toFixed(1))))}),this.svg.querySelector("g.lines").insertAdjacentHTML("beforeend",__html),this.restoreContext()},LineChart.prototype.drawLines=function(){var _this=this,__offsetX=this.worldToScreenX(this.document.view.x.min)-this.bounds.left,__html="";this.document.series.forEach(function(serie,i){var __points_html=(__points=_this.document[serie.name].map(function(v,i){i=_this.worldToScreenX(_this.document.distances[i]),v=serie.transform?serie.transform(_this,v):_this.worldToScreenY(v);return new math_1.Vector2(i-__offsetX,v)})).reduce(function(html,item,i,self){return html+'<circle cx="{0}" cy="{1}" r="3"         stroke="black"        stroke-width="1"         fill="white" />'.format(item.x,item.y,"white")},""),__y=_this.worldToScreenY(serie.view.min),__x_min=_this.worldToScreenX(_this.document.view.x.min)-__offsetX,__x_max=_this.worldToScreenX(_this.document.view.x.max)-__offsetX,__points=__points.concat(serie.closeLine?[new math_1.Vector2(__x_max,__y),new math_1.Vector2(__x_min,__y)]:[]),__x_max=utils_1.PathBuilder.createPath(__points,.1,serie.closeLine),__x_min='<path d="{0}" fill="{1}"       stroke-dasharray=""       stroke="{2}"       stroke-width="{3}" />'.format(__x_max,serie.closeLine?serie.fillStyle||COLORS.next():"none",serie.strokeStyle||"black",serie.lineWidth||1);__html+=__x_min+__points_html}),this.svg.querySelector("g.data").insertAdjacentHTML("beforeend",__html)},LineChart.prototype.updateLayerDrag=function(pos){var x0=this.width/this.svg.clientWidth*Math.min(pos.x,this.mouse.mouseDownPosition.x),pos=this.width/this.svg.clientWidth*Math.max(pos.x,this.mouse.mouseDownPosition.x);this.layer.setAttribute("x",x0.toString()),this.layer.setAttribute("width",(pos-x0).toString())},LineChart.prototype.updateLayer=function(){var x0=this.worldToScreenX(this.document.distances[Math.min(this.mouse.dragStart,this.mouse.dragEnd)]),x1=this.worldToScreenX(this.document.distances[Math.max(this.mouse.dragStart,this.mouse.dragEnd)]);this.layer.setAttribute("x",x0.toString()),this.layer.setAttribute("width",(x1-x0).toString())},LineChart.prototype.clearLayer=function(){this.layer.setAttribute("width","0")},LineChart.prototype.saveContext=function(){this.states.push(core_1.core.clone(this.currentFont))},LineChart.prototype.restoreContext=function(){this.states.length&&(this.currentFont=this.states.pop())},LineChart.prototype.appendText=function(x,y,text){this.svg.querySelector("g.text").insertAdjacentHTML("beforeend",'<text x="{0}" y="{1}" font-family="{fontFamily}"  font-size="{fontSize}" text-anchor="{textAnchor}">{2}</text>'.format(x,y,text,this.currentFont))},LineChart}();exports.default=require,exports.createDocument=function(dataset){function __getRange(array,start,end){for(var __res={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,range:void 0},__current=start;__current<=end;)__res.min=Math.min(__res.min,array[__current]),__res.max=Math.max(__res.max,array[__current]),__current++;return __res.range=__res.max-__res.min,__res}var document={series:[],length:dataset.streams.distance.data.length,distances:dataset.streams.distance.data,altitude:dataset.streams.altitude.data,s2:dataset.streams.s2.data,offset:0,view:{},getRange:__getRange,configureView:function(start,end){return document.view.start=start,document.view.end=end,document.view.x={},document.view.x.max=1.005*document.distances[end],document.view.x.min=document.distances[start],document.view.x.range=document.view.x.max-document.view.x.min,document.view.y=__getRange(document.altitude,start,end),document.view.h=__getRange(document.s2,start,end),document.series=[],document.series.push({name:"altitude",closeLine:!0,showDots:!0,unit:"m",view:document.view.y,fillStyle:"rgba(225,125,125,.8)",lineWidth:1,strokeStyle:"rgba(0,0,0,.8)",ratio:100/document.view.y.range}),document.series.push({name:"s2",closeLine:!1,showDots:!1,unit:"ppm",view:document.view.h,fillStyle:"rgba(150,0,0,.8)",lineWidth:3,strokeStyle:"rgba(00,0,250,.9)",ratio:100/document.view.h.range,transform:function(sender,v){return sender.bounds.top+sender.bounds.height-(v-sender.document.view.h.min)*this.ratio*sender.bounds.height/120}}),document},resetView:function(){return document.configureView(0,document.length-1)}};return document.resetView()}},{"../core":16,"../core.pub-sub":18,"../math":25,"./utils":5}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.describeArc=exports.PathBuilder=exports.niceScale=exports.createColors=void 0;var math_1=require("../math"),require=(exports.createColors=function(v){for(var __v=[0,51,102,153,204,255],__l=__v.length-1,__c=[],__x=0;__x<v;)__c.add("rgba({0},{1},{2},.9)".format(__v[~~(0,math_1.Random)(__l,0)],__v[~~(0,math_1.Random)(__l,0)],__v[~~(0,math_1.Random)(__l,0)])),__x++;return{current:-1,values:__c,next:function(){return this.current=++this.current%this.values.length,this.values[this.current]}}},exports.niceScale=function(min,max,steps){var range=__niceNum(max-min,!1),steps=__niceNum(range/(steps-1),!0),result={range:range,min:Math.floor(min/steps)*steps,max:Math.ceil(max/steps)*steps,tickSpacing:steps,values:Array()};function __niceNum(range,round){var exponent=Math.floor(Math.log10(range)),range=range/Math.pow(10,exponent);return round?range<1.5?Math.pow(10,exponent):range<3?2*Math.pow(10,exponent):range<7?5*Math.pow(10,exponent):10*Math.pow(10,exponent):range<=1?Math.pow(10,exponent):range<=2?2*Math.pow(10,exponent):range<=5?5*Math.pow(10,exponent):10*Math.pow(10,exponent)}for(var x=result.max;x>result.min;x-=result.tickSpacing)result.values.push(x);return result},function(){function PathBuilder(){}return PathBuilder.line=function(a,b){var lengthX=b.x-a.x,b=b.y-a.y;return{length:Math.sqrt(Math.pow(lengthX,2)+Math.pow(b,2)),angle:Math.atan2(b,lengthX)}},PathBuilder.controlPoint=function(line,smooth){return function(current,previous,next,reverse){previous=line(previous||current,next||current),next=previous.angle+(reverse?Math.PI:0),reverse=previous.length*smooth,previous=current.x+Math.cos(next)*reverse,current=current.y+Math.sin(next)*reverse;return new math_1.Vector2(previous,current)}},PathBuilder.bezierCommand=function(controlPoint){return function(point,i,a){var cps=controlPoint(a[i-1],a[i-2],point),a=controlPoint(point,a[i-1],a[i+1],!0);return"C {0},{1} {2},{3} {x},{y}".format(cps.x,cps.y,a.x,a.y,point)}},PathBuilder.svgPath=function(points,command,closePath){return points.reduce(function(acc,e,i,a){return 0==i?"M {x},{y}".format(e):closePath&&i==a.length-2||closePath&&i==a.length-1?acc+" L {x},{y}".format(e):acc+(" "+command(e,i,a))},"")+(closePath?" z":"")},PathBuilder.createPath=function(points,smoothing,closePath){void 0===closePath&&(closePath=!0);smoothing=PathBuilder.bezierCommand(PathBuilder.controlPoint(PathBuilder.line,smoothing));return PathBuilder.svgPath(points,smoothing,closePath)},PathBuilder}());exports.PathBuilder=require;exports.describeArc=function(x,y,radius,startAngle,endAngle){var start=(0,math_1.polarToCartesian)(x,y,radius,endAngle-90),end=(0,math_1.polarToCartesian)(x,y,radius,startAngle-90),endAngle=endAngle-startAngle<=180?"0":"1";return["M",start.x,start.y,"A",radius,radius,0,endAngle,0,end.x,end.y,"L",x,y,"L",start.x,start.y].join(" ")}},{"../math":25}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsibleBox=void 0;var core_1=require("./core"),core_events_1=require("./core.events"),__counter=0,require=function(){function CollapsibleBox(titulo,content,onexpand,height){void 0===titulo&&(titulo="t�tulo"),void 0===onexpand&&(onexpand=function(sender){}),void 0===height&&(height="10em");var _this=this;this.loaded=!1,this.collapsed=!0,this.onexpand=new core_events_1.CoreEvent("CollapsibleBox.onexpand"),this._onExpand=function(sender){},this._control=core_1.core.build("div",{innerHTML:'<div id="collapsible-box-{0}" class="w3-border">  <button class="w3-block w3-border-0" style="outline-style:none">{1}<i style="margin: 2px;" class="fa fa-chevron-down w3-right"></i></button>  <div class="w3-hide w3-border-top" style="overflow:auto"></div></div>'.format(++__counter,titulo)},!0),this._header=this._control.querySelector("button"),this._body=this._control.querySelector("div"),this._header.onclick=function(event){_this.collapsed?_this.expand():_this.collapse()},"-"!=height&&(this._body.style.height=height),content&&this.setContent(content),this._onExpand=onexpand}return CollapsibleBox.create=function(titulo,height){return new CollapsibleBox(titulo=void 0===titulo?"t�tulo":titulo,"",void 0,height=void 0===height?"10em":height)},CollapsibleBox.prototype.hide=function(){return this.collapse(),this._header.classList.add("w3-hide"),this},CollapsibleBox.prototype.show=function(){return this._header.classList.remove("w3-hide"),this},CollapsibleBox.prototype.appendTo=function(parent){return parent.appendChild(this._control),this},CollapsibleBox.prototype.collapse=function(){this._body.classList.add("w3-hide");var __e=this._header.querySelector("i");return __e.classList.remove("fa-chevron-up"),__e.classList.add("fa-chevron-down"),this.collapsed=!0,this},CollapsibleBox.prototype.expand=function(){this._body.classList.remove("w3-hide");var __e=this._header.querySelector("i");return __e.classList.remove("fa-chevron-down"),__e.classList.add("fa-chevron-up"),this._onExpand&&this._onExpand(this),this.onexpand.dispatch(this),this.collapsed=!1,this},CollapsibleBox.prototype.getControl=function(){return this._control},CollapsibleBox.prototype.getBody=function(){return this._body},CollapsibleBox.prototype.setContent=function(value){return core_1.core.isString(value)?this._body.innerHTML=value:(this._body.innerHTML="",this._body.appendChild(value)),this},CollapsibleBox}();exports.CollapsibleBox=require},{"./core":16,"./core.events":14}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EditableGrid=void 0;var core_pub_sub_1=require("./core.pub-sub"),require=function(){function EditableGrid(table,onFocus,onChange){function __onfocus(e){var __td=(e=e.target).parentNode,__tr=__td.parentNode,__tr=(_this.previous=e.textContent.trim(),_this.currentIndex=__tr.rowIndex,{tr:__tr,td:__td,target:e,current:_this.previous});core_pub_sub_1.default.publish(EditableGrid.OnfocusMessage,__tr),onFocus&&onFocus(_this,__tr)}function __onblur(e){var __td=(e=e.target).parentNode,__tr=__td.parentNode;null!=_this.previous&&_this.previous!=__td.textContent.trim()&&(__tr={tr:__tr,td:__td,target:e,previous:_this.previous,current:e.textContent.trim()},core_pub_sub_1.default.publish(EditableGrid.OnChangeMessage,__tr),onChange&&onChange(_this,__tr),_this.previous=void 0),e.style.outline="1px solid transparent"}var _this=this;this.currentIndex=-1,this.previous=void 0,this.table=table;table.querySelectorAll("td div[contenteditable]").toArray().forEach(function(e){e.onblur=__onblur,e.onfocus=__onfocus}),table.onkeypress=function(e){if(13==e.keyCode)return e.preventDefault&&e.preventDefault(),!1},table.onkeydown=function(e){var __td,__row,__pos,__focus,__res=!0,__sender=e.target;return"DIV"==__sender.tagName&&-1<[13,37,38,39,40].indexOf(e.keyCode)&&(__row=(__td=__sender.parentNode).parentNode,__pos=window.getSelection().getRangeAt(0).startOffset,__focus=function(t,r,c){e.preventDefault();try{t.rows[r].cells[c].firstElementChild.focus()}catch(e){}__res=!1},13==e.keyCode&&__focus(table,__row.rowIndex,__td.cellIndex+1),38==e.keyCode&&1<__row.rowIndex&&__focus(table,__row.rowIndex-1,__td.cellIndex),40==e.keyCode&&__row.rowIndex<table.rows.length-1&&__focus(table,__row.rowIndex+1,__td.cellIndex),39==e.keyCode&&__pos==__sender.textContent.length&&__focus(table,__row.rowIndex,__td.cellIndex+1),37==e.keyCode)&&0==__pos&&__focus(table,__row.rowIndex,__td.cellIndex-1),__res}}return EditableGrid.OnfocusMessage="editable-grid/focus",EditableGrid.OnChangeMessage="editable-grid/change",EditableGrid}();exports.EditableGrid=require},{"./core.pub-sub":18}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextViewer=void 0;var core_1=require("./core"),core_events_1=require("./core.events"),require=require("./controls.text-viewer.ts.css"),__data_Uri="data:text/css;base64,"+window.btoa(require.default),__counter=0,__css=!1;require=function(){function TextViewer(){var _this=this;this.id="svc_{0}".format(++__counter),__css||(document.querySelector("head").appendChild(core_1.core.build("link",{rel:"stylesheet",type:"text/css",href:__data_Uri})),__css=!0),this._control=core_1.core.build("div",{className:"svc_viewer",id:this.id,innerHTML:'<div class="scv_Main">  <pre class="scv_LineContainer" id="svc_{0}_line"></pre>  <pre class="scv_TextContainer" id="svc_{0}_code"></pre></div>'.format(__counter)}),this._control.querySelector(".scv_Main").onscroll=function(event){event=event.target;_this._control.querySelector(".scv_LineContainer").style.left="{0}px".format(event.scrollLeft)},this.onclick=new core_events_1.CoreEvent("txt-viewer.onclick")}return TextViewer.prototype.setContent=function(value){var _this=this,__div=(this._control.querySelector(".scv_LineContainer").innerHTML=value.replace(/(\r\n|\r|\n)/gm,"\n").split("\n").reduce(function(a,_,i){return a+(i+1+"<br/>")},""),this._control.querySelector(".scv_TextContainer"));return __div.textContent=value,__div.onclick=function(e){return _this.onclick.dispatch(e)},this},TextViewer.prototype.getControl=function(){return this._control},TextViewer}();exports.TextViewer=require},{"./controls.text-viewer.ts.css":9,"./core":16,"./core.events":14}],9:[function(require,module,exports){module.exports="\r\n.svc_viewer{overflow:hidden;}\r\n.scv_Main  {position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;padding:0;}     \r\n.scv_TextContainer{ position:absolute;top:0;left:4.4em;right:0;height:auto;z-index:4;margin:0;user-select: text; }\r\n.scv_TextContainer{ padding:.4em;white-space:pre;overflow:initial;font-family:Monospace;tab-size:4;}\r\n.scv_LineContainer{ padding:.4em;position:absolute;top:0;left:0;height:auto;margin:0;z-index:5;overflow:hidden;background-color:lightyellow;border-right:solid 1px silver;}\r\n.scv_LineContainer{ font-weight:bold;font-family:Monospace;color:Gray;text-align:right;width:3.5em;box-sizing:border-box;user-select:none }\r\n"},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ajax=void 0;var ajax={get:function(url,interceptor){return new Promise(function(resolve,reject){var xml=ajax.createXMLHttpRequest();xml.open("GET",url,!0),interceptor&&interceptor(xml),xml.onreadystatechange=function(){4==xml.readyState&&resolve(xml.responseText)},xml.onerror=function(e){reject(e)},xml.send(null)})},post:function(url,body,interceptor){return new Promise(function(resolve,reject){var xml=ajax.createXMLHttpRequest();xml.open("POST",url,!0),interceptor?interceptor(xml):xml.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset:ISO-8859-1"),xml.onreadystatechange=function(){4==xml.readyState&&resolve(xml.responseText)},xml.send(body)})},callWebMethod:function(url,body,callBack){var xml=ajax.createXMLHttpRequest();xml.open("POST",url,!0),xml.onreadystatechange=function(){4==xml.readyState&&callBack(xml.responseText)},xml.setRequestHeader("Content-type","application/json; charset=utf-8"),xml.send(body)},createXMLHttpRequest:function(){return new XMLHttpRequest}};exports.ajax=ajax},{}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommandManager=void 0,exports.CommandManager=function(doc){var _this={getDocument:function(){return doc},undos:new Array,redos:new Array,clear:function(){_this.undos.length=0,_this.redos.length=0},executeCommad:function(command){try{_this.undos.push(command.execute(doc)),_this.redos.length=0}catch(e){console.error(e)}},undo:function(){0<_this.undos.length&&_this.redos.push(_this.undos.pop().undo(doc))},redo:function(){0<_this.redos.length&&_this.undos.push(_this.redos.pop().execute(doc))}};return _this}},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addEventListeners=void 0;var tslib_1=require("tslib"),core_1=require("./core"),core_pub_sub_1=require("./core.pub-sub"),EVENTS=["[on-click]","[on-publish]","[route-link]","[on-change]"];exports.addEventListeners=function(container,handlers,context){var fn={innerHTML:function(e,value,mode){return e.innerHTML=value},innerText:function(e,value,mode){return e.innerText=value},className:function(e,value){return e.className=value},append:function(e,value,mode){return e.innerHTML+=value}};EVENTS.forEach(function(selector,index){container.querySelectorAll(selector).toArray().concat([container]).forEach(function(e){var tokens,fn_1,topic,fn_2,name=selector.replace("[","").replace("]","");e.attributes.getNamedItem(name)&&(name=e.attributes.getNamedItem(name).value,tokens=name.split(":"),0===index?(fn_1=handlers[tokens[0]]||core_1.core.getValue(tokens[0],context),e.onclick=function(event){event=tokens.slice(1).reduce(function(a,p){return a.push("@"==p.charAt(0)?core_1.core.getValue(p.slice(1),context):p),a},[e,event]);return fn_1.apply(context,event)}):(1===index&&(topic=(topic=core_1.core.getValue(tokens[0],core_pub_sub_1.default))===window?tokens[0]:topic,core_pub_sub_1.default.subscribe(topic,function(message,data){var fnName=tokens[1];fnName?(fnName=fn[fnName]||handlers[fnName]||core_1.core.getValue(fnName,context))&&fnName.apply(context,tslib_1.__spreadArray([e,data],tokens.slice(2),!0)):fn.innerHTML(e,data,tokens[1])})),2===index&&(e.onclick=function(e){return!1}),3===index&&(topic="SELECT"===e.tagName,"publish"===name?topic?e.onchange=function(){return core_pub_sub_1.default.publish(core_pub_sub_1.default.TOPICS.VALUE_CHANGE,e)}:e.oninput=function(){return core_pub_sub_1.default.publish(core_pub_sub_1.default.TOPICS.VALUE_CHANGE,e)}:(fn_2=handlers[name]||core_1.core.getValue(name,context),topic?e.onchange=function(){return fn_2.apply(context,[e])}:e.oninput=function(){return fn_2.apply(context,[e])},e.onblur=function(){return fn_2.apply(context,[e])}))))})})}},{"./core":16,"./core.pub-sub":18,tslib:26}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DialogHelper=void 0;var DialogHelper=function(){function DialogHelper(){}return DialogHelper.getWrapper=function(id){var __container=document.getElementById(id),__dlg={container:__container,title:__container.querySelector(".js-title"),body:__container.querySelector(".js-content"),closeButton:__container.querySelector(".js-close-button"),acceptButton:__container.querySelector(".js-accept-button"),close:function(){return __container.style.display="none",__dlg},show:function(onConfirm){return onConfirm&&(__dlg.acceptButton.onclick=function(){onConfirm(__dlg)}),__container.style.display="block",__dlg},init:function(onInit){return onInit&&onInit(__dlg),__dlg},setTitle:function(title){return __dlg.title.innerHTML=title,__dlg},setBody:function(content){return content.tagName?(__dlg.body.innerHTML="",__dlg.body.appendChild(content)):__dlg.body.innerHTML=content,__dlg},disableClickOutside:function(){return __dlg.container.onclick=function(){},__dlg}};return __dlg.acceptButton.onclick=__dlg.close,__dlg.closeButton.onclick=__dlg.close,__dlg.container.onclick=function(sender){sender.target===__dlg.container&&__dlg.close()},__dlg},DialogHelper}();exports.DialogHelper=DialogHelper},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoreEvent=void 0;var counter=0,CoreEvent=function(){function CoreEvent(name){this._name=name,this._subscribers=new Map}return CoreEvent.prototype.dispatch=function(eventArgs){var _this=this;return this._subscribers.forEach(function(callback){return callback(_this._name,eventArgs)}),this},CoreEvent.prototype.add=function(callback){return this._subscribers.set(++counter,callback),counter},CoreEvent.prototype.remove=function(id){return this._subscribers.delete(id)},CoreEvent}();exports.CoreEvent=CoreEvent},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var includes=[];exports.default=function(url){return new Promise(function(resolve){var script;-1<includes.indexOf(url.toLowerCase())?resolve(null):((script=document.createElement("script")).type="text/javascript",script.onload=function(){includes.push(url.toLowerCase()),resolve(function(){document.getElementsByTagName("head")[0].removeChild(script),includes.remove(url.toLowerCase())})},script.src=url,document.getElementsByTagName("head")[0].appendChild(script))})}},{}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.core=void 0;var tslib_1=require("tslib"),require=function(){function Core(){}return Core.prototype.isNull=function(v){return null===v},Core.prototype.toArray=function(v){return Array.from?Array.from(v):Array.prototype.slice.call(v)},Core.prototype.isArray=function(v){return Array.isArray(v)},Core.prototype.isString=function(v){return"string"==typeof v},Core.prototype.isBoolean=function(v){return"boolean"==typeof v},Core.prototype.isNumber=function(v){return"number"==typeof v},Core.prototype.isFunction=function(v){return"function"==typeof v},Core.prototype.isObject=function(v){return v&&"object"==typeof v},Core.prototype.apply=function(a,b,d){if(d&&this.apply(a,d),a&&b&&this.isObject(b))for(var p in b)this.isArray(b[p])?a[p]=this.clone(b[p]):this.isObject(b[p])?this.apply(a[p]=a[p]||{},b[p]):a[p]=b[p];return a},Core.prototype.clone=function(o){var _this=this;return this.isArray(o)?o.slice(0):this.isObject(o)&&o.clone?o.clone():this.isObject(o)?Object.keys(o).reduce(function(a,k){return a[k]=_this.clone(o[k]),a},{}):o},Core.prototype.join=function(items,property,separator){return items.reduce(function(a,o){return a.append(o[property||"id"])},[]).join(void 0===separator?"-":separator||"")},Core.prototype.createStringBuilder=function(s){return{value:s||"",append:function(s){return this.value=this.value+s,this},appendLine:function(s){return this.value=this.value+(s||"")+"\n",this}}},Core.prototype.$=function(e,control){var __element=document.getElementById(e);return __element||((__element=(control||document).querySelectorAll(e)).length?__element.toArray():null)},Core.prototype.element=function(idOrSelector,targets){return document.getElementById(idOrSelector)||this.elements(idOrSelector,targets)[0]},Core.prototype.elements=function(selector,targets){return(targets||document).querySelectorAll(selector).toArray()},Core.prototype.build=function(tagName,options,firstElementChild){options=this.isString(options)?{innerHTML:options}:options,tagName=this.apply(document.createElement(tagName),options);return firstElementChild?tagName.firstElementChild:tagName},Core.prototype.parseQueryString=function(){return location.search.slice(1).split("&").reduce(function(o,a){return o[a.split("=")[0]]=a.split("=")[1]||"",o},{})},Core.prototype.config=function(name){return{write:function(key,value){return localStorage.setItem("{0}.{1}".format(name,key),value),this},read:function(key){return localStorage.getItem("{0}.{1}".format(name,key))}}},Core.prototype.getValue=function(key,scope){return key.split(/\.|\[|\]/).reduce(function(a,b){var apply_proto,name,arg;return""===b||"this"===b?a:(arg=[],(apply_proto=-1<(name=b).indexOf("|"))&&(name=(b=String.trimValues(b.split("|")))[0],arg=String.trimValues(b[1].split(","))),null!=(b=void 0===(b=a[name])&&a.outerScope?exports.core.getValue(name,a.outerScope):b)?apply_proto?b.__proto__[arg[0]].apply(b,arg.slice(1)):b:a===self?"":self)},scope||self)},Core}();exports.core=new require,String.leftPad=function(val,size,ch){var result=""+val;for(null!=ch&&""!==ch||(ch=" ");result.length<size;)result=ch+result;return result},String.trimValues=function(values){return values.map(function(s){return s.trim()})},String.prototype.format=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];function __call_fn(fn,params,base){return params=String.trimValues(params).reduce(function(a,p){return a.push("@"==p.charAt(0)?exports.core.getValue(p.slice(1),__context):p),a},base),fn.apply(__context,params)}var __context=values[values.length-1]||self;return this.replace(/\{(\d+|[^{]+)\}/g,function(m,k){var tokens,index,k=String.trimValues(k.split(":")),key=k[0],k=k[1];return tokens=/^\d+/.test(key)?(index=~~(tokens=String.trimValues(key.split("|")))[0],tokens=0==tokens.length?"data":["data"].concat(tokens.slice(1)).join("|"),exports.core.getValue(tokens,{data:values[index],outerScope:__context})):exports.core.getValue(key,__context),exports.core.isFunction(tokens)?__call_fn(tokens,k?k.split(/\s|\;/):[],[]):k?(key=(index=String.trimValues(k.split(/=>/)))[0],k=index[1],__call_fn(exports.core.getValue(key,__context),k?k.split(/\s|\;/):[],[tokens])):tokens})},String.prototype.replaceAll=function(pattern,replacement){return this.split(pattern).join(replacement)},String.prototype.fixDate=function(){return this.split(" ")[0]},String.prototype.fixTime=function(){return this.split(" ")[1]},String.prototype.fixYear=function(){return this.fixDate().split("/")[2]},String.prototype.paddingLeft=function(v){return(v+this).slice(-v.length)},String.prototype.merge=function(context){return this.replace(/{([^{]+)?}/g,function(m,key){var __tokens;return 0<key.indexOf(":")?(__tokens=key.split(":"),exports.core.getValue(__tokens[0],context)(exports.core.getValue(__tokens[1],context),context)):"function"==typeof(__tokens=exports.core.getValue(key,context))?__tokens(context):__tokens})},String.prototype.toXmlDocument=function(){return(new DOMParser).parseFromString(this,"text/xml")},String.prototype.htmlDecode=function(){return(new DOMParser).parseFromString(this,"text/html").documentElement.textContent},String.prototype.startsWith=String.prototype.startsWith||function(t){return 0==this.indexOf(t)},Array.prototype.remove=function(o){o=this.indexOf(o);return-1!=o&&this.splice(o,1),this},Array.prototype.add=function(o){return this.push(o),o},Array.prototype.append=function(o){return this.push(o),this},Array.prototype.select=function(sentence){return exports.core.isString(sentence)?this.map(function(e){return e[sentence]}):this.map(sentence)},Array.prototype.item=function(propName,value,def){return this.filter(function(v){return v[propName]==value})[0]||def},Array.prototype.contains=function(propName,value){return this.item(propName,value)},Array.prototype.lastItem=function(){return this[this.length-1]},Array.prototype.where=function(sentence){return exports.core.isFunction(sentence)?this.filter(sentence):exports.core.isObject(sentence)?this.filter(new Function("a",Object.keys(sentence).reduce(function(a,propname,i){return a+(0<i?" && ":"")+((a=sentence[propname])instanceof RegExp?"{1}.test(a.{0})":exports.core.isString(a)?"a.{0} === '{1}'":"a.{0} === {1}").format(propname,a)},"return "))):this},Array.prototype.sortBy=function(propname,desc){var __order=[],__names=propname.split(",").map(function(token,i){token=token.split(" ");return __order[i]=token[1]&&"DESC"==token[1].toUpperCase()?-1:1,token[0]});return __order[0]=desc?-1:1,this.sort(function(a,b){function __fn(a,b){var __x=a[__names[i]],__y=b[__names[i]];return __x<__y?-1*__order[i]:__y<__x?+__order[i]:++i<__names.length?__fn(a,b):0}var i=0;return __fn(a,b)}),this},Array.prototype.orderBy=function(sentence){var __sentence=exports.core.isString(sentence)?function(a){return a[sentence]}:sentence;return this.map(function(e){return e}).sort(function(a,b){a=__sentence(a),b=__sentence(b);return a<b?-1:b<a?1:0})},Array.prototype.distinct=function(sentence){void 0===sentence&&(sentence="");var __sentence=exports.core.isString(sentence)?function(a){return sentence?a[sentence]:a}:sentence,r=[];return this.forEach(function(item){item=__sentence(item);-1==r.indexOf(item)&&r.push(item)}),r},Array.prototype.groupBy=function(prop){return this.reduce(function(groups,item){target=item;var target,key=prop.split(",").map(function(f){return target[f]}).join("__");return(groups[key]=groups[key]||[]).push(item),groups},{})},Array.prototype.toGroupWrapper=function(ctx){function __f(k,t,name){return ctx[name]={},dataSet.distinct(function(v){return v[k]}).forEach(function(v){ctx[name][v]=dataSet.reduce(function(p,c){return c[k]==v?p+c[t]:p},0)}),__f}var dataSet=this;return __f},Array.prototype.sum=function(prop){return this.reduce(function(a,item){return a+item[prop]},0)},Array.prototype.toDictionary=function(prop,value){return this.reduce(function(a,d){return a[d[prop]]=value?d[value]:d,a},{})},Array.prototype.split=function(size){return this.reduce(function(acc,current,i,self){return i%size?acc:tslib_1.__spreadArray(tslib_1.__spreadArray([],acc,!0),[self.slice(i,i+size)],!1)},[])},Array.prototype.includes=Array.prototype.includes||function(searchElement,fromIndex){return-1!=this.indexOf(searchElement)},NodeList.prototype.toArray=function(){return Array.from?Array.from(this):exports.core.toArray(this)},Object.entries=Object.entries||function(o){return Object.keys(o).map(function(k){return[k,o[k]]})}},{tslib:26}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Paginator=void 0;var Paginator=function(){function Paginator(){}return Paginator.paginate=function(data,currentPage,pageSize,title){void 0===currentPage&&(currentPage=1),void 0===pageSize&&(pageSize=10);var totalPages=Math.ceil(data.length/pageSize),startIndex=(currentPage<1?currentPage=1:totalPages<currentPage&&(currentPage=totalPages),(currentPage-1)*pageSize),endIndex=Math.min(startIndex+pageSize-1,data.length-1);return{totalItems:data.length,currentPage:currentPage,pageSize:pageSize,totalPages:totalPages,startIndex:startIndex,endIndex:endIndex,allItems:data,visibleItems:data.slice(startIndex,endIndex+1),title:title,getChecked:function(){return data.where({__checked:!0}).map(function(item,i){return{index:data.indexOf(item),item:item}})}}},Paginator}();exports.Paginator=Paginator},{}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),topics=new Map,subUid=-1;exports.default={subscribe:function(topic,func){topics.has(topic)||topics.set(topic,[]);var token=(++subUid).toString();return topics.get(topic).push({token:token,func:func}),token},publish:function(topic){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];return!!topics.has(topic)&&(setTimeout(function(){for(var _a,subscribers=topics.get(topic),len=subscribers?subscribers.length:0;len--;)(_a=subscribers[len]).func.apply(_a,tslib_1.__spreadArray([topic],args,!1))},0),!0)},unsubscribe:function(token){for(var m in topics.keys){var subscribers=topics.get(m);if(subscribers)for(var i=0,j=subscribers.length;i<j;i++)if(subscribers[i].token===token)return subscribers.splice(i,1),token}return!1},TOPICS:{VIEW_CHANGE:"view:change",VALUE_CHANGE:"value:change",MUNICIPIO_CHANGE:"municipio:change",WINDOW_SCROLL:"window.scroll",WINDOW_RESIZE:"window.resize",NOTIFICATION:"notification.show"}}},{tslib:26}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReportEngine=void 0;var core_1=require("./core"),core_templates_1=require("./core.templates"),require=function(){function ReportEngine(){this.BS={},this.module_ReportEngine_Copy=function(source,dest){for(var p in dest)if(dest.hasOwnProperty(p))if(source.hasOwnProperty(p))dest[p]=source[p];else{if("_max_"===p||"_mim_"===p){var __max=dest[p];for(m in __max)__max.hasOwnProperty(m)&&source.hasOwnProperty(m)&&(__max[m]=source[m])}if("_values_"===p){var m,__agregate=dest[p];for(m in __agregate)__agregate.hasOwnProperty(m)&&source.hasOwnProperty(m)&&(__agregate[m]=[source[m]])}}},this.module_ReportEngine_Sum=function(source,dest){for(var p in dest)if(dest.hasOwnProperty(p))if(source.hasOwnProperty(p))dest[p]+=source[p];else{if("_max_"===p||"_min_"===p){var __max=dest[p];for(m in __max)__max.hasOwnProperty(m)&&source.hasOwnProperty(m)&&(__max[m]=("_max_"==p?source[m]>__max[m]?source:__max:source[m]<__max[m]?source:__max)[m])}if("_values_"===p){var m,__agregate=dest[p];for(m in __agregate)__agregate.hasOwnProperty(m)&&source.hasOwnProperty(m)&&__agregate[m].add(source[m])}}}}return ReportEngine.prototype.__cloneRowTemplate=function(e){var __row=e.cloneNode(!0);return e.parentNode.parentNode.deleteRow(e.rowIndex),__row},ReportEngine.prototype.__fillTemplate=function(e,scope){var _elements=e.querySelectorAll("[xbind]").toArray();return e.attributes.getNamedItem("xbind")&&_elements.push(e),_elements.forEach(function(child){core_1.core.toArray(child.attributes).where({value:/{[^{]+?}/g}).map(function(a){return a.value=(0,core_templates_1.merge)(a.value,scope)}),core_1.core.toArray(child.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach(function(text){return text.textContent=(0,core_templates_1.merge)(text.textContent,scope,text)}),String.trimValues(child.attributes.getNamedItem("xbind").value.split(";")).forEach(function(token){var _params,_args,_value;""!==token&&(token=String.trimValues(token.split(":")),_params=String.trimValues(token[1].split(/\s|\,/)),_value=core_1.core.getValue(_params[0],scope),core_1.core.isFunction(_value)?(_args=_params.slice(1).reduce(function(a,p){return a.push("@"==p.charAt(0)?core_1.core.getValue(p.slice(1),scope):p),a},[scope,child]),_value=_value.apply(scope,_args)):_params[1]&&(_value=core_1.core.getValue(_params[1],scope)(_value,_params[2],scope,child)),child[token[0]]=_value)})}),e},ReportEngine.prototype.__mergeTemplate=function(template,sb,context,onGroupFooter){var _this=this;if(template.forEach)return template.forEach(function(t,i){_this.__mergeTemplate(t,sb,context[i],onGroupFooter)});this.__fillTemplate(template,{BS:this.BS}),context.tag||"nofooter"==context.tag||(sb.append(template.outerHTML.replace(/xbind="[^"]*"/g,"")),onGroupFooter&&onGroupFooter({sb:sb,section:context}))},ReportEngine.prototype.module_ReportEngine_processAll=function(o){var _this=this,__doc=document.createDocumentFragment(),__that=(__doc.appendChild(core_1.core.build("div",{innerHTML:o.ReportTemplate},!1)),o.DetailTemplate=this.__cloneRowTemplate(__doc.querySelector(o.DetailTemplateSelector)),o.HideTotal?(__row=__doc.querySelector(o.TotalTemplateSelector)).parentNode.removeChild(__row):o.TotalTemplate=this.__cloneRowTemplate(__doc.querySelector(o.TotalTemplateSelector)),o.GroupsTemplates=[],o.GroupsTemplates=o.Grupos.map(function(g){return _this.__cloneRowTemplate(__doc.querySelector(g.selector))}),this),_g_id=-1;function __DoHeaders(){o.Grupos.forEach(function(grupo,ii){var g;ii<_g_id||(g=o.Grupos[ii]).header&&("hidden;"!=(g=core_1.core.getValue(g.header,__that)(g.current,g.name))&&(g.text?_sb.append("<tr {0}>{1}</tr>".format(g.attributes,g.text)):g.row?__that.BS.reportDefinition.dom_tbody.appendChild(g.row):_sb.append('<tr class="group-header">{0}</tr>'.format(g))),o.RepeatHeadersAfter==ii)&&o.RepeatHeaders.forEach(function(index){""!=index&&_sb.append(o.Headers[index].html)})})}var __row,__groups,_sb=core_1.core.createStringBuilder("");return o.OnStart(o.DataSet),o.DataSet.forEach(function(r,i){0==i&&__DoHeaders(),o.OnRow(r),o.Grupos.every(function(g){return g.test(r)})?o.Grupos.forEach(function(g){g.sum(r)}):(o.Grupos.some(function(g,i){var __groups;return!g.test(r)&&(_g_id=i,(g=o.GroupsTemplates.map(function(t){return t})).splice(0,i),g.reverse(),(__groups=o.Grupos.map(function(g){return g})).splice(0,i),__groups.reverse(),_this.__mergeTemplate(g,_sb,__groups,o.OnGroupFooter),o.Grupos.forEach(function(grupo,ii){i<=ii?(grupo.init(r),_g_id=i):grupo.sum(r)}),!0)}),o.OnRowEnd(r),__DoHeaders()),o.HideDetail||_this.__mergeTemplate(o.DetailTemplate,_sb,{name:"detail"},o.g)}),0<o.DataSet.length&&(this.BS.previous=this.BS.data,(__row=o.GroupsTemplates.map(function(t){return t})).reverse(),o.HideTotal||__row.push(o.TotalTemplate),(__groups=o.Grupos.map(function(g){return g})).reverse(),__groups.push({name:"summary"}),this.__mergeTemplate(__row,_sb,__groups,o.OnGroupFooter)),__doc.querySelector(o.ReportTableSelector).innerHTML.replace("<tbody>","<tbody>"+_sb.value)},ReportEngine.prototype.fromReportDefinition=function(rd,data,callback){var _this=this,__that=this,__summary=(this.BS={reportDefinition:rd},rd.Iteratefn&&data.forEach(rd.Iteratefn),rd.orderBy&&data.sortBy(rd.orderBy,!1),JSON.parse(rd.summary||"{}"));var __wrapper={DataSet:data,HideDetail:"true"==rd.hideDetail||!1,HideTotal:0==rd.groups.length||"true"==rd.HideTotal||!1,ReportTemplate:rd.html,ReportTableSelector:"#"+rd.tableId,DetailTemplateSelector:"#"+rd.details[0].id,TotalTemplateSelector:0==rd.groups.length?"":"#"+rd.groups.lastItem().id,Grupos:rd.groups.where(function(g,i){return i<rd.groups.length-1}).map(function(g,i){return{name:"G"+(i+1),selector:"#"+g.id,key:g.key,tag:g.tag||"",current:"",header:g.header,data:core_1.core.clone(__summary),init:function(value){var __k=value[this.key].toString(),__BS_Name=__that.BS[this.name];__BS_Name.all[__k]=__BS_Name.all[__k]||[],__BS_Name.all[__k].push(value),__BS_Name.recordCount=1,__that.module_ReportEngine_Copy(value,this.data)},sum:function(value){var __k=value[this.key].toString(),__BS_Name=__that.BS[this.name];__BS_Name.all[__k]=__BS_Name.all[__k]||[],__BS_Name.all[__k].push(value),__BS_Name.recordCount+=1,__that.module_ReportEngine_Sum(value,this.data)},test:function(value){return value[this.key]==this.current}}})||[],OnGroupFooter:rd.OnGroupFooter,Headers:rd.headers,RepeatHeaders:(rd.repeatHeader||"").split(","),RepeatHeadersAfter:rd.repeatHeaderAfter,OnRow:function(data){__that.BS.recordCount+=1,__that.BS.previous=__that.BS.data||data,__that.BS.data=data,__wrapper.Grupos.forEach(function(g,i){__that.BS[g.name].data=Object.create(g.data)}),__that.module_ReportEngine_Sum(data,__that.BS.G0),rd.onRowfn&&new Function("ctx",rd.onRowfn)(_this.BS)},OnStart:function(dataSet){__that.BS={recordCount:0,G0:core_1.core.clone(__summary),dataSet:dataSet,reportDefinition:__that.BS.reportDefinition},__wrapper.Grupos.forEach(function(g,i){g.current=dataSet&&dataSet[0]?dataSet[0][g.key]:"",__that.BS[g.name]={recordCount:0,all:{}}}),rd.onStartfn&&rd.onStartfn(__that.BS)},OnRowEnd:function(data){__wrapper.Grupos.forEach(function(g){g.current=data[g.key]}),rd.onRowEndfn&&new Function("ctx",rd.onRowEndfn)(__that.BS)},PrintReport:function(callback){return callback&&callback(_this.module_ReportEngine_processAll(__wrapper)),_this}};return __wrapper.PrintReport(callback)},ReportEngine}();exports.ReportEngine=require},{"./core":16,"./core.templates":23}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loader=void 0,exports.loader={load:function(code){var __context={headers:[],groups:[],details:[]},__cur=[{columns:[]}],__func="",__funcBody="";function __getValue(value){return value&&value.trim().startsWith("@")?__context[value.trim().split("@")[1].trim()]||"":value?value.trim():""}function __parse_properties(value){for(var __reg=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,__o={},__match=__reg.exec(value);null!=__match;)__o[__match[1].trim()]=__getValue(__match[2].trim().replace(/^'([^']*)'$/g,"$1")),__match=__reg.exec(value);return __o}function __parse_row(value){value=__parse_properties(value);return value.columns=[],value}function __getAttributes(data){var __attributes=[];return Object.keys(data).filter(function(key){return"columns"!=key&&"html"!=key&&data.hasOwnProperty(key)}).forEach(function(key){__attributes.push('{0}="{1}"'.format("className"==key?"class":key,__getValue(data[key])))}),0<__attributes.length?" "+__attributes.join(" "):""}function __parseLine(l,o){if(!__func&&!l.trim())return function(){};var __body,__name,__tokens,tokens;if(/^(DEFINE|#|ADD_COL|CREATE|FUNCTION|END)/.test(l)){if(/^#/.test(l))return function(){};if(/^FUNCTION (\w.*)/.test(l))return __tokens=l.match(/^FUNCTION (\w.*)$/),__func=__tokens[1].trim(),__funcBody="",function(){};if(/^END/.test(l))return __body=__funcBody,__name=__func,__func=__funcBody="",function(ctx){ctx[__name]=new Function("ctx",__body)};if(/^ADD_COL /.test(l))return __tokens=l.match(/ADD_COL (.*)$/),tokens=__tokens,function(ctx){__cur[__cur.length-1].columns.push(__parse_properties(tokens[1]))};if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(l))return __tokens=l.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/),function(){var tokens=__tokens;return function(ctx){ctx[tokens[1].trim()]=tokens[2].trim()}}();if(/^CREATE\s\s*(\w*) (.*)$/.test(l))return("header"==(__tokens=l.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var tokens=__tokens;return function(ctx){ctx.headers.push(__parse_row(tokens[2])),__cur=ctx.headers}}:"group"==__tokens[1]?function(){var tokens=__tokens;return function(ctx){ctx.groups.push(__parse_row(tokens[2])),__cur=ctx.groups}}:"detail"==__tokens[1]?function(){var tokens=__tokens;return function(ctx){ctx.details.push(__parse_row(tokens[2])),__cur=ctx.details}}:function(){var tokens=__tokens;return function(ctx){ctx[tokens[1]]=tokens[2]}})();throw new Error("Tabbly : Unrecognized text after DEFINE")}if(__func)return __funcBody=__funcBody+o+"\n",function(){};throw new Error("Tabbly : Unrecognized text")}function fill(data,hide,header){var sb="",cellTag=header?"th":"td";return(data||[]).forEach(function(row,i){var sb_row="";sb_row+="\n      <tr{0}>".format(__getAttributes(row)),row.columns.forEach(function(col,i){sb_row+="\n        <{2}{0}>{1}</{2}>".format(__getAttributes(col),__getValue(col.html),cellTag)}),sb_row+="\n      </tr>",row.html=sb_row,hide&&-1<hide.indexOf(i.toString())||(sb+=sb_row)}),sb}return code.split("\n").forEach(function(l){__parseLine(l.trim(),l)(__context)}),__context.html='<div id="{3}">\n  <table class= "w3-table-all" style = "width:100%;" id="table-{3}" >\n     <thead>{0}    </thead>\n    <tbody>{1}{2}    </tbody>\n  </table>\n</div>'.format(fill(__context.headers,(__context.hiddenHeaders||"").split(","),!0),fill(__context.details),fill(__context.groups),__context.tableId||""),__context}}},{}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReportEngine=void 0;var core_1=require("./core"),require=function(){function ReportEngine(){this.BS={}}return ReportEngine.prototype.generateReport=function(rd,data,mediator){var __that=this,__rd=(mediator.clear&&mediator.clear(),mediator.message({type:"report.begin"}),rd),__dataSet=__rd.parseData?__rd.parseData(__rd,data,mediator.message):data;mediator.message({type:"report.log.message",text:"Inicializando..."});var __MERGE_AND_SEND=function(t,p){p.BS=__that.BS,mediator.send(t.format(p))};function __groupsHeaders(){__groups.forEach(function(g,ii){if(!(ii<__breakIndex))return mediator.message({type:"report.sections.group.header",value:g.id}),g.definition.header?__MERGE_AND_SEND(g.definition.header,g):g.definition.headerValueProvider?mediator.send(g.definition.headerValueProvider(g)):void 0})}function __groupsFooters(index){var __gg=__groups.map(function(g){return g});index&&__gg.splice(0,index),__gg.reverse().forEach(function(g){return mediator.message({type:"report.sections.group.footer",value:g.id}),g.definition.footer?__MERGE_AND_SEND(g.definition.footer,g):g.definition.footerValueProvider?mediator.send(g.definition.footerValueProvider(g)):void 0})}var __breakIndex=-1,__summary=function(){var __summary=JSON.parse(__rd.summary||"{}");return __rd.onInitSummaryObject?__rd.onInitSummaryObject(__summary):__summary}(),rd=(__rd.sections||[]).where({type:"header"}),data=(__rd.sections||[]).where({type:"total"}),__details=((__rd.sections||[]).where({type:"footer"}),__rd.details||[]),__groups=__rd.groups.map(function(g,i){return{name:"G"+(i+1),id:g.id,rd:__rd,definition:g,current:"",data:core_1.core.clone(__summary),init:function(value){var __k=value[this.definition.key].toString(),__Gx=__that.BS[this.name];__Gx.all[__k]=__Gx.all[__k]||[],__Gx.all[__k].push(value),!(__Gx.recordCount=1)!==this.__resume&&(this.__resume||(this.__resume=0<Object.keys(this.data).length))&&__that.copy(value,this.data)},sum:function(value){var __k=value[this.definition.key].toString(),__Gx=__that.BS[this.name];__Gx.all[__k]=__Gx.all[__k]||[],__Gx.all[__k].push(value),__Gx.recordCount+=1,!1!==this.__resume&&__that.sum(value,this.data)},test:function(value){return value[this.definition.key]==this.current}}})||[];__that.BS={reportDefinition:__rd,mediator:mediator},__rd.iteratefn&&(mediator.message({type:"report.log.message",text:"Inicializando elementos..."}),__dataSet.forEach(__rd.iteratefn)),__rd.orderBy&&(mediator.message({type:"report.log.message",text:"Ordenando datos..."}),__dataSet.sortBy(__rd.orderBy,!1)),__that.BS={recordCount:0,G0:core_1.core.clone(__summary),dataSet:__dataSet,reportDefinition:__rd,mediator:mediator},__groups.forEach(function(g,i){g.current=__dataSet&&__dataSet[0]?__dataSet[0][g.definition.key]:"",__that.BS[g.name]={recordCount:0,all:{}}}),__rd.onStartfn&&__rd.onStartfn(__that.BS),[__rd.sections,__rd.details,__rd.groups].reduce(function(a,b){return a.concat(b)},[]).map(function(s){s.valueProviderfn&&(s.valueProvider=core_1.core.getValue(s.valueProviderfn,{BS:__that.BS}),delete s.valueProviderfn),s.footerValueProviderfn&&(s.footerValueProvider=core_1.core.getValue(s.footerValueProviderfn,{BS:__that.BS}),delete s.footerValueProviderfn),s.headerValueProviderfn&&(s.headerValueProvider=core_1.core.getValue(s.headerValueProviderfn,{BS:__that.BS}),delete s.headerValueProviderfn)}),mediator.message({type:"report.render.rows"}),mediator.message({type:"report.log.message",text:"Generando informe..."}),rd.forEach(function(t){return mediator.message({type:"report.sections.header",value:t}),t.template?__MERGE_AND_SEND(t.template,t):t.valueProvider?mediator.send(t.valueProvider(t)):void 0}),0<__dataSet.length&&__groupsHeaders(),__dataSet.forEach(function(r,i){var __next;__that.BS.recordCount++,__that.BS.isLastRow=__dataSet.length===__that.BS.recordCount,__that.BS.isLastRowInGroup=__that.BS.isLastRow,__that.BS.percent=__that.BS.recordCount/__dataSet.length*100,__that.BS.previous=__that.BS.data||r,__that.BS.data=r,__groups.forEach(function(g,i){__that.BS[g.name].data=Object.create(g.data)}),__that.sum(r,__that.BS.G0),__rd.onRowfn&&__rd.onRowfn(__that.BS),mediator.message({type:"report.render.row",text:__that.BS.percent.toFixed(1)+" %",value:__that.BS.percent}),__groups.every(function(g){return g.test(r)})?__groups.forEach(function(g){g.sum(r)}):(__groups.some(function(g,i){return!g.test(r)&&(__groupsFooters(__breakIndex=i),__groups.forEach(function(grupo,ii){__breakIndex<=ii?(grupo.init(r),__breakIndex=i):grupo.sum(r)}),!0)}),__groups.forEach(function(g){g.current=r[g.definition.key]}),__rd.onGroupChangefn&&__rd.onGroupChangefn(__that.BS),mediator.message({type:"report.sections.group.change",value:__groups}),__groupsHeaders()),__groups.length&&!__that.BS.isLastRow&&(__next=__dataSet[__that.BS.recordCount],__that.BS.isLastRowInGroup=!__groups.every(function(g){g=g.definition.key;return __next[g]===__that.BS.data[g]})),__details.forEach(function(d){return mediator.message({type:"report.sections.detail",value:d.id}),d.template?__MERGE_AND_SEND(d.template,d):d.valueProvider?mediator.send(d.valueProvider(d)):void 0})}),0<__dataSet.length&&(__that.BS.previous=__that.BS.data,__groupsFooters()),data.forEach(function(t){return mediator.message({type:"report.sections.total",value:t.id}),t.template?__MERGE_AND_SEND(t.template,t):t.valueProvider?mediator.send(t.valueProvider(t)):void 0}),mediator.message({type:"report.render.end"}),mediator.message({type:"report.end"}),mediator.flush&&mediator.flush()},ReportEngine.prototype.merge=function(template,o){return template.replace(/{([^{]+)?}/g,function(m,key){var __fn;return 0<key.indexOf(":")?((__fn=key.split(":"))[0]=core_1.core.getValue(__fn[0],o),__fn[1]=core_1.core.getValue(__fn[1],o),__fn[0](__fn[1],o)):"function"==typeof(__fn=core_1.core.getValue(key,o))?__fn(o):__fn})},ReportEngine.prototype.copy=function(s,d){Object.keys(d).map(function(k){d[k]=s[k]})},ReportEngine.prototype.sum=function(s,d){Object.keys(d).map(function(k){d[k]+=s[k]})},ReportEngine.prototype.compute=function(ds,name){return ds.reduce(function(t,o){return t+o[name]},0)},ReportEngine.prototype.group=function(a,c){function __f(k,t){return ds.distinct(function(v){return v[k]}).forEach(function(v){c[v]=ds.reduce(function(p,c,i,a){return c[k]==v?p+c[t]:p},0)}),__f}var ds=a;return __f},ReportEngine}();exports.ReportEngine=require},{"./core":16}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loader=void 0,exports.loader={load:function(code){var __context={sections:[],groups:[],details:[]},__cur={},__func="",__funcBody="",__setState=!1;function __parse_properties(value){for(var __reg=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,__o={},__match=__reg.exec(value);null!=__match;)__o[__match[1].trim()]=function(value){return value&&value.trim().startsWith("@")?__context[value.trim().split("@")[1].trim()]||"":value?value.trim():""}(__match[2].trim().replace(/^'([^']*)'$/g,"$1")),__match=__reg.exec(value);return __o}return code.split("\n").forEach(function(l){!function(l,o){if(!__func&&!l.trim())return function(){};var __body,__name,__tokens,tokens;if(/DEFINE|#|CREATE|SET|FUNCTION|END/.test(l)){if(/^#/.test(l))return function(){};if(/^SET (\w.*)/.test(l))return __tokens=l.match(/^SET (\w.*)$/),__setState=!0,__func=__tokens[1].trim(),__funcBody="",function(){};if(/^FUNCTION (\w.*)/.test(l))return __tokens=l.match(/^FUNCTION (\w.*)$/),__setState=!1,__func=__tokens[1].trim(),__funcBody="",function(){};if(/^END/.test(l))return __body=__funcBody,__name=__func,__func=__funcBody="",__setState?(__setState=!1,function(ctx){__cur[__name]=__body.trim()}):function(ctx){ctx[__name]=new Function("ctx",__body)};if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(l))return __tokens=l.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/),tokens=__tokens,function(ctx){ctx[tokens[1].trim()]=tokens[2].trim()};if(/^CREATE\s\s*(\w*) (.*)$/.test(l))return"section"==(__tokens=l.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var tokens=__tokens;return function(ctx){ctx.sections.push(__parse_properties(tokens[2])),__cur=ctx.sections[ctx.sections.length-1]}}():"group"==__tokens[1]?function(){var tokens=__tokens;return function(ctx){ctx.groups.push(__parse_properties(tokens[2])),__cur=ctx.groups[ctx.groups.length-1]}}():"detail"==__tokens[1]?function(){var tokens=__tokens;return function(ctx){ctx.details.push(__parse_properties(tokens[2])),__cur=ctx.details[ctx.details.length-1]}}():void 0;throw new Error("Tabbly : Unrecognized text after DEFINE")}if(__func)return __funcBody=__funcBody+o+"\n",function(){};throw new Error("Tabbly : Unrecognized text")}(l.trim(),l)(__context)}),__context}}},{}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fillTemplate=exports.executeTemplate=exports.merge=void 0;var tslib_1=require("tslib"),core_1=require("./core");function merge(template,o,HTMLElemnt){function __call_fn(fn,params,base){return params=String.trimValues(params).reduce(function(a,p){return a.push("@"==p.charAt(0)?core_1.core.getValue(p.slice(1),o):p),a},base),HTMLElemnt&&params.push(HTMLElemnt),fn.apply(o,params)}return template.replace(/{([^{]+)?}/g,function(m,key){var name_1,tokens,value_1;return 0<key.indexOf(":")?(tokens=String.trimValues(key.split(":")),value_1=core_1.core.getValue(tokens[0],o),name_1=(tokens=String.trimValues(tokens[1].split(/=>/)))[0],tokens=(tokens=tokens[1])?String.trimValues(tokens.split(/\s|\;/)):[],__call_fn(core_1.core.getValue(name_1,o),tokens,[value_1])):(tokens=(name_1=String.trimValues(key.split(/=>/)))[0],value_1=name_1[1],key=core_1.core.getValue(tokens,o),core_1.core.isFunction(key)?__call_fn(key,value_1.split(/\s|\;/),[]):key)})}function fillTemplate(e,scope){var _root=e,_repeaters=_root.querySelectorAll("[xfor]").toArray(),_repeatersElements=_repeaters.reduce(function(a,r){return a.concat(core_1.core.$("[xbind]",r))},tslib_1.__spreadArray([],_repeaters,!0)),_elements=_root.querySelectorAll("[xbind]").toArray().filter(function(x){return!_repeatersElements.includes(x)});return _root.attributes.getNamedItem("xbind")&&_elements.push(_root),_elements.forEach(function(child){var fn;child.attributes.getNamedItem("xif")&&(fn=new Function("ctx","return {0};".format(child.attributes.getNamedItem("xif").value).replaceAll("@","this.")),child.style.display=fn.apply(scope)?"":"none"),core_1.core.toArray(child.attributes).where({value:/{[^{]+?}/g}).map(function(a){return a.value=merge(a.value,scope,child)}),core_1.core.toArray(child.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach(function(text){return text.textContent=merge(text.textContent,scope,text)}),String.trimValues(child.attributes.getNamedItem("xbind").value.split(";")).forEach(function(token){var name,prop_name;""!==token&&(name=(token=String.trimValues(token.split(":")))[0],token=token[1],prop_name=(token=String.trimValues(token.split(/=>/)))[0],token=token[1],prop_name=core_1.core.getValue(prop_name,scope),core_1.core.isFunction(prop_name)&&((token=String.trimValues((token||"").split(/\s|#/)).reduce(function(a,p){return a.push("@"==p.charAt(0)?core_1.core.getValue(p.slice(1),scope):p),a},[])).push(child),prop_name=prop_name.apply(scope,token)),name)&&(child[name]=prop_name)})}),_repeaters.map(function(repeater){var _a=String.trimValues(repeater.attributes.getNamedItem("xfor").value.split(" in ")),itemName=_a[0],_a=_a[1],_a=core_1.core.getValue(_a,scope);return _a&&_a!=window&&_a.map(function(d,i){i={index:i,outerScope:scope},i[itemName]=core_1.core.clone(d),d=fillTemplate(repeater.cloneNode(!0),i);repeater.parentNode.insertBefore(d,repeater)}),repeater}).forEach(function(repeater){return repeater.parentNode.removeChild(repeater)}),e}exports.merge=merge,exports.fillTemplate=fillTemplate,exports.executeTemplate=function(e,values,dom){var _template=core_1.core.isString(e)?core_1.core.$(e):e,e=values.reduce(function(a,v,i){i={index:i,data:v,node:fillTemplate(_template.cloneNode(!0),v)};return a.nodes.push(i),dom||a.html.push(i.node.outerHTML.replace(/xbind="[^"]*"/g,"")),a},{nodes:[],html:[]});return dom?e.nodes:e.html.join("")}},{"./core":16,tslib:26}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TreeUtils=void 0;var tslib_1=require("tslib"),core_templates_1=require("./core.templates"),core_1=require("./core"),require=function(){function TreeUtils(){}return TreeUtils.createTree=function(data,propertyNames){data=data.groupBy(propertyNames.join(","));return Object.entries(data).reduce(function(node,group){return group[0].split("__").reduce(function(node,level,i,self){return node[level]=node[level]||(i==self.length-1?{rows:tslib_1.__spreadArray([],group[1],!0)}:{})},node),node},{})},TreeUtils.treeToHtml=function(tree,nodeTemplate,leafTemplate){function visitNode(node,nodeName,parent){var __node={name:nodeName,parent:parent,deep:deep++,rows:node.rows,innerHTML:"",children:Object.keys(node).where(function(property){return"rows"!=property}).sort().map(function(g){return{name:g,value:node[g]}})};return node.rows?(deep--,(0,core_templates_1.executeTemplate)(leafTemplate,[__node])):(__node.innerHTML=__node.children.reduce(function(html,child){return html+visitNode(child.value,child.name,__node)},""),deep--,nodeTemplate.format(__node))}var deep=0;return visitNode(tree,"root")},TreeUtils.treeToText=function(tree){function visitNode(node,nodeName,parent){var __node={name:nodeName,parent:parent,deep:deep++,rows:node.rows,innerText:"",children:Object.keys(node).where(function(property){return"rows"!=property}).sort().map(function(g){return{name:g,value:node[g]}})};return node.rows?(deep--,"{0} {1}\n{0}  {2}\n".format(" ".repeat(2*__node.deep),__node.name,core_1.core.join(node.rows,"ID","\n"+" ".repeat(2+2*__node.deep)))):(__node.innerText=__node.children.reduce(function(html,child){return html+visitNode(child.value,child.name,__node)},""),deep--,"{0} {name}\n{innerText}".format(" ".repeat(2*__node.deep),__node))}var deep=0;return visitNode(tree,"root")},TreeUtils}();exports.TreeUtils=require},{"./core":16,"./core.templates":23,tslib:26}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NextPowerOfTwo=exports.IsPowerOfTwo=exports.polarToCartesian=exports.Degrees=exports.Radians=exports.Clamp=exports.Random=exports.Rectangle=exports.Box=exports.Vector2=void 0;var Vector2=function(){function Vector2(x,y){this.x=x,this.y=y}return Vector2.fromArrayi=function(values){return new Vector2(~~values[0],~~values[1])},Vector2.sum=function(a,b){return new Vector2(a.x+b.x,a.y+b.y)},Vector2.difference=function(a,b){return new Vector2(a.x-b.x,a.y-b.y)},Vector2.dot=function(a,b){return a.x*b.x+a.y*b.y},Vector2.cross=function(a,b){return a.x*b.y-a.y*b.x},Vector2.distance=function(a,b){var dx=a.x-b.x,a=a.y-b.y;return Math.sqrt(dx*dx+a*a)},Vector2.distanceSquared=function(a,b){var dx=a.x-b.x,a=a.y-b.y;return dx*dx+a*a},Vector2.equals=function(a,b){return a.x==b.x&&a.y==b.y},Vector2.lerp=function(a,b,f,resultVec){var x=a.x,a=a.y;return resultVec.x=(b.x-x)*f+x,resultVec.y=(b.y-a)*f+a,resultVec},Vector2.prototype.set=function(x,y){return this.x=x,this.y=y,this},Vector2.prototype.clone=function(){return new Vector2(this.x,this.y)},Vector2.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Vector2.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},Vector2.prototype.invert=function(){return this.x=-this.x,this.y=-this.y,this},Vector2.prototype.cross=function(vector){return this.x*vector.y-this.y*vector.x},Vector2.prototype.dot=function(vector){return this.x*vector.x+this.y*vector.y},Vector2.prototype.scale=function(sx,sy){return this.x*=sx,this.y*=sy,this},Vector2.prototype.normalize=function(){var _d=1/this.length();return this.scale(_d,_d)},Vector2.prototype.normalisedCopy=function(){return new Vector2(this.x,this.y).normalize()},Vector2.prototype.add=function(vector){return this.x+=vector.x,this.y+=vector.y,this},Vector2.prototype.subtract=function(vector){return this.x-=vector.x,this.y-=vector.y,this},Vector2.prototype.mul=function(scalar){return this.x*=scalar,this.y*=scalar,this},Vector2.prototype.divide=function(scalar){return this.x/=scalar,this.y/=scalar,this},Vector2.prototype.equals=function(vector){return this==vector||!!vector&&this.x==vector.x&&this.y==vector.y},Vector2.prototype.rotate=function(angle){var cos=Math.cos(angle),angle=Math.sin(angle),newX=this.x*cos-this.y*angle,cos=this.y*cos+this.x*angle;return this.x=newX,this.y=cos,this},Vector2.Vector2_ZERO=new Vector2(0,0),Vector2.Vector2_UNIT_X=new Vector2(1,0),Vector2.Vector2_UNIT_Y=new Vector2(0,1),Vector2.Vector2_NEGATIVE_UNIT_X=new Vector2(-1,0),Vector2.Vector2_NEGATIVE_UNIT_Y=new Vector2(0,-1),Vector2.Vector2_UNIT_SCALE=new Vector2(1,1),Vector2.rotateAroundPoint=function(v,axisPoint,angle){return v.clone().subtract(axisPoint).rotate(angle).add(axisPoint)},Vector2}(),Box=(exports.Vector2=Vector2,function(){function Box(top,right,bottom,left){this.left=left,this.top=top,this.right=right,this.bottom=bottom}return Box.prototype.clone=function(){return new Box(this.top,this.right,this.bottom,this.left)},Box.prototype.toRect=function(){return new Rectangle(this.left,this.top,this.right-this.left,this.bottom-this.top)},Box.prototype.centerPoint=function(){return new Vector2(this.left+(this.right-this.left>>1),this.top+(this.bottom-this.top>>1))},Box}()),Rectangle=(exports.Box=Box,function(){function Rectangle(left,top,width,height){this.left=left,this.top=top,this.width=width,this.height=height}return Rectangle.prototype.clone=function(){return new Rectangle(this.left,this.top,this.width,this.height)},Rectangle.prototype.toBox=function(){return new Box(this.top,this.left+this.width,this.top+this.height,this.left)},Rectangle.prototype.centerPoint=function(){return new Vector2(this.left+(this.width>>1),this.top+(this.height>>1))},Rectangle.prototype.contains=function(other){return other instanceof Rectangle?this.left<=other.left&&this.left+this.width>=other.left+other.width&&this.top<=other.top&&this.top+this.height>=other.top+other.height:other.x>=this.left&&other.x<=this.left+this.width&&other.y>=this.top&&other.y<=this.top+this.height},Rectangle}());function Radians(degrees){return degrees*Math.PI/180}exports.Rectangle=Rectangle,exports.Random=function(max,min){return Math.random()*(max-min+1)+min},exports.Clamp=function(value,min,max){return Math.min(Math.max(value,min),max)},exports.Radians=Radians,exports.Degrees=function(radians){return 180*radians/Math.PI},exports.IsPowerOfTwo=function(value){return 0<value&&0==(value&value-1)},exports.NextPowerOfTwo=function(value){for(var k=1;k<value;)k*=2;return k},exports.polarToCartesian=function(x,y,r,angleInDegrees){return angleInDegrees=Radians(angleInDegrees),{x:x+r*Math.cos(angleInDegrees),y:y+r*Math.sin(angleInDegrees)}}},{}],26:[function(require,module,exports){!function(global){!function(){var __extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__createBinding;!function(factory){var root="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function createExporter(exports,previous){return exports!==root&&("function"==typeof Object.create?Object.defineProperty(exports,"__esModule",{value:!0}):exports.__esModule=!0),function(id,v){return exports[id]=previous?previous(id,v):v}}"object"==typeof module&&"object"==typeof module.exports?factory(createExporter(root,createExporter(module.exports))):factory(createExporter(root))}(function(exporter){var extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}),__setModuleDefault=(__extends=function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__rest=function(s,e){var t={};for(p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t},__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__esDecorate=function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",ctor=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(ctor?Object.getOwnPropertyDescriptor(ctor,contextIn.name):{}),done=!1,i=decorators.length-1;0<=i;i--){var p,context={};for(p in contextIn)context[p]="access"===p?{}:contextIn[p];for(p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0!==result){if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.push(_)}}else(_=accept(result))&&("field"===kind?initializers.push(_):descriptor[key]=_)}ctor&&Object.defineProperty(ctor,contextIn.name,descriptor),done=!0},__runInitializers=function(thisArg,initializers,value){for(var useValue=2<arguments.length,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__propKey=function(x){return"symbol"==typeof x?x:"".concat(x)},__setFunctionName=function(f,name,prefix){return"symbol"==typeof name&&(name=name.description?"[".concat(name.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:prefix?"".concat(prefix," ",name):name})},__metadata=function(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)},__awaiter=function(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){var op=[n,v];if(f)throw new TypeError("Generator is already executing.");for(;_=g&&op[g=0]?0:_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else{if(!(t&&_.label<t[2])){t[2]&&_.ops.pop(),_.trys.pop();continue}_.label=t[2],_.ops.push(op)}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}},__exportStar=function(m,o){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(o,p)||__createBinding(o,m,p)},__createBinding=Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&("get"in desc?m.__esModule:!desc.writable&&!desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){o[k2=void 0===k2?k:k2]=m[k]},__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return{value:(o=o&&i>=o.length?void 0:o)&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||0<n--)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||((ar=ar||Array.prototype.slice.call(from,0,i))[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},__await=function(v){return this instanceof __await?(this.v=v,this):new __await(v)},__asyncGenerator=function(thisArg,_arguments,generator){var g,q,i;if(Symbol.asyncIterator)return g=generator.apply(thisArg,_arguments||[]),q=[],i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;throw new TypeError("Symbol.asyncIterator is not defined.");function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){1<q.push([n,v,a,b])||resume(n,v)})})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}},__asyncDelegator=function(o){var p,i={};return verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:!1}:f?f(v):v}:f}},__asyncValues=function(o){var m,i;if(Symbol.asyncIterator)return(m=o[Symbol.asyncIterator])?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);throw new TypeError("Symbol.asyncIterator is not defined.");function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)})(resolve,reject,(v=o[n](v)).done,v.value)})}}},__makeTemplateObject=function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v});__importStar=function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=function(mod){return mod&&mod.__esModule?mod:{default:mod}},__classPrivateFieldGet=function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver===state&&f:state.has(receiver))return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver);throw new TypeError("Cannot read private member from an object whose class did not declare it")},__classPrivateFieldSet=function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver===state&&f:state.has(receiver))return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value;throw new TypeError("Cannot write private member to an object whose class did not declare it")},__classPrivateFieldIn=function(state,receiver){if(null===receiver||"object"!=typeof receiver&&"function"!=typeof receiver)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof state?receiver===state:state.has(receiver)},exporter("__extends",__extends),exporter("__assign",__assign),exporter("__rest",__rest),exporter("__decorate",__decorate),exporter("__param",__param),exporter("__esDecorate",__esDecorate),exporter("__runInitializers",__runInitializers),exporter("__propKey",__propKey),exporter("__setFunctionName",__setFunctionName),exporter("__metadata",__metadata),exporter("__awaiter",__awaiter),exporter("__generator",__generator),exporter("__exportStar",__exportStar),exporter("__createBinding",__createBinding),exporter("__values",__values),exporter("__read",__read),exporter("__spread",__spread),exporter("__spreadArrays",__spreadArrays),exporter("__spreadArray",__spreadArray),exporter("__await",__await),exporter("__asyncGenerator",__asyncGenerator),exporter("__asyncDelegator",__asyncDelegator),exporter("__asyncValues",__asyncValues),exporter("__makeTemplateObject",__makeTemplateObject),exporter("__importStar",__importStar),exporter("__importDefault",__importDefault),exporter("__classPrivateFieldGet",__classPrivateFieldGet),exporter("__classPrivateFieldSet",__classPrivateFieldSet),exporter("__classPrivateFieldIn",__classPrivateFieldIn)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});
