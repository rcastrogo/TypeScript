!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t){e.exports='<div class="w3-animate-left">\r\n  <div class="w3-teal w3-padding">TypeScript-app</div>\r\n\t<div class="w3-bar w3-black w3-card">\r\n    <button class="w3-bar-item w3-button tablink" on-click="openLink:VIEW-HOME"><i class="fa fa-home" aria-hidden="true"></i></button>\r\n    <button class="w3-bar-item w3-button tablink" on-click="openLink:VIEW-TABLES">Tablas</button>\r\n    <button class="w3-bar-item w3-button tablink" on-click="openLink:VIEW-PUB-SUB">Pub-Sub</button>\r\n    <button class="w3-bar-item w3-button tablink" on-click="openLink:VIEW-COMMANDS">Commands</button>\r\n    <button class="w3-bar-item w3-button tablink" on-click="openLink:VIEW-REPORTS">Reports</button>\r\n    <button class="w3-bar-item w3-button tablink" on-click="openLink:VIEW-REPORTS-V2">Reports V2</button>\r\n    <button class="w3-bar-item w3-button tablink" on-click="openLink:VIEW-REPORTS-JS">JsReports</button>\r\n  </div>\r\n\r\n  <div id="VIEW-TABLES"     class="w3-display-container city w3-animate-opacity" style="display:none"></div>\r\n  <div id="VIEW-PUB-SUB"    class="w3-display-container city w3-animate-opacity" style="display:none"></div>\r\n\t<div id="VIEW-COMMANDS"   class="w3-display-container city w3-animate-opacity" style="display:none"></div>\r\n\t<div id="VIEW-REPORTS"    class="w3-display-container city w3-animate-opacity" style="display:none"></div>\r\n\t<div id="VIEW-REPORTS-V2" class="w3-display-container city w3-animate-opacity" style="display:none"></div>\r\n\t<div id="VIEW-REPORTS-JS" class="w3-display-container city w3-animate-opacity" style="display:none"></div>\r\n\r\n  <div id="VIEW-HOME" class="w3-display-container city w3-animate-opacity">\r\n    <div class="w3-teal w3-center w3-padding">Página principal</div>\r\n    <div class="w3-padding">\r\n      <p>\r\n        Prueba de concepto de un framework para el desarrollo de aplicaciones con TypeScript.\r\n      </p>\r\n    </div>\r\n  </div>\r\n\r\n</div>'},function(e,t){e.exports='<div class="w3-container w3-padding">\r\n\r\n  <h1>CommandManager</h1>\r\n\r\n  <button on-click="doCommand">Test CommandManager</button>\r\n\r\n  <div header class="w3-container  w3-padding">\r\n\r\n  </div>\r\n\r\n</div>\r\n'},function(e,t){e.exports='<div class="w3-container w3-padding">\r\n\r\n  <h1>Pub-Sub</h1>\r\n\r\n  <button on-click="doPublish">Test</button>\r\n\t<div class="w3-container w3-padding" on-publish="TOPICS.NOTIFICATION:innerHTML">\r\n\r\n  </div>\r\n\r\n\r\n</div>\r\n'},function(e,t){e.exports='<div>\r\n\r\n  <div class="w3-teal w3-center w3-padding">Informes Js</div>\r\n\r\n  <div class="w3-padding w3-margin w3-border" report-container style="overflow:auto; max-height:400px;">\r\n\r\n  </div>\r\n\r\n</div>'},function(e,t){e.exports='<div>\r\n\r\n  <div class="w3-teal w3-center w3-padding">Informes V2</div>\r\n\r\n  <div class="w3-padding w3-margin w3-border" report-container style="overflow:auto; max-height:400px;">\r\n\r\n  </div>\r\n\r\n</div>\r\n'},function(e,t){e.exports='<div>\r\n\r\n  <div class="w3-teal w3-center w3-padding">Informes</div>\r\n\r\n  <div class="w3-padding w3-margin w3-border" report-container style="overflow:auto; max-height:400px;">\r\n\r\n  </div>\r\n\r\n</div>\r\n'},function(e,t){e.exports='<div class="">\r\n\r\n  <h1>Proveedores</h1>\r\n\r\n  <div header class="w3-bar w3-border-top w3-border-left w3-border-right">\r\n\r\n    <span xbind="innerHTML:title" class="w3-left" style="padding:6px 0 4px 8px;"></span>\r\n\r\n    <button class="w3-button w3-xlarge w3-right fa fa-plus w3-border-left" style="padding: 7px 4px;" title="Insertar" on-click="doAction:new"></button>\r\n    <button class="w3-button w3-xlarge w3-right fa fa-trash w3-border-left" style="padding: 7px 4px;" title="Eliminar" on-click="doAction:delete"></button>\r\n    <button class="w3-button w3-xlarge w3-right fa fa-edit w3-border-left" style="padding: 9px 4px 5px 4px;" title="Editar" on-click="doAction:edit"></button>\r\n\r\n    <button on-click="doAction:last" class="w3-button w3-right w3-border-left" style="padding: 8px;">&#10095;&#10095;</button>\r\n    <button on-click="doAction:next" class="w3-button w3-right w3-border-left" style="padding: 8px;">&#10095;</button>\r\n    <input on-change="doGoToPage" xbind="value:currentPage" class="w3-right w3-center" style="width: 3em;padding:8px; border:none" />\r\n    <button on-click="doAction:previous" class="w3-button w3-right w3-border-left w3-border-right" style="padding: 8px;">&#10094;</button>\r\n    <button on-click="doAction:first" class="w3-button w3-right w3-border-left" style="padding: 8px;">&#10094;&#10094;</button>\r\n\r\n    <div class="w3-right w3-border-left" style="margin:0; padding:0">\r\n      <input on-change="doSearch" type="text" class="w3-right" style="padding:8px; border:none" placeholder="Buscar.." /> \r\n    </div>\r\n\r\n  </div>\r\n\r\n  <table class="w3-table-all">\r\n    <thead>\r\n      <tr on-click="doSort">\r\n        <th style="width:1%;"></th>\r\n        <th class="w3-hover-gray sorteable">Id</th>\r\n        <th class="w3-hover-gray sorteable">Nif</th>\r\n        <th class="w3-hover-gray sorteable">Nombre</th>\r\n        <th class="w3-hover-gray sorteable">Descripción</th>\r\n        <th class="w3-hover-gray sorteable">Fecha</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr xbind xfor="proveedor in this.visibleItems" id="row-{proveedor._id}">\r\n        <td xbind class="w3-border-right">\r\n          <input xbind="checked:fn.checked=>@proveedor" type="checkbox" on-click="doAction:check-item:{index}" />\r\n        </td>\r\n        <td xbind on-click="doAction:edit-row:{proveedor._id}">{proveedor._id}</td>\r\n        <td xbind>{proveedor._nif}</td>\r\n        <td xbind>{proveedor._nombre}</td>\r\n        <td xbind>{proveedor._descripcion|toUpperCase}</td>\r\n        <td xbind>\r\n          {proveedor._fechaDeAlta|fixDate}\r\n          <button xbind title="Añadir a favoritos" class="fa fa-star" style="float:right" on-click="doAddToFavorites:{proveedor._id}"></button>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <form id="proveedor-edit-dialog" class="" style="display:none">\r\n    <label for="txt-id">Id</label>\r\n    <input xbind="value:_id" id="txt-id" type="text" class="w3-input w3-border w3-round" readonly /><br />\r\n    <label for="txt-nif">Nif</label>\r\n    <input xbind="value:_nif" id="txt-nif" type="text" class="w3-input w3-border w3-round" /><br />\r\n\r\n    <label for="txt-nombre">Nombre</label>\r\n    <input xbind="value:_nombre" id="txt-nombre" type="text" class="w3-input w3-border w3-round"  /><br />\r\n    <label for="txt-descripcion">Descripción</label>\r\n    <input xbind="value:_descripcion" id="txt-descripcion" type="text" class="w3-input w3-border w3-round" /><br />\r\n  </form>\r\n\r\n</div>\r\n'},function(e,t){e.exports='<div>\r\n\r\n  <div class="w3-teal w3-center w3-padding">Edición de entidades</div>\r\n\r\n  <div class="w3-padding" table-container>\r\n\r\n  </div>\r\n\r\n</div>\r\n'},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n);const o=new class{isNull(e){return null===e}toArray(e){return Array.from(e)}isArray(e){return Array.isArray(e)}isString(e){return"string"==typeof e}isBoolean(e){return"boolean"==typeof e}isNumber(e){return"number"==typeof e}isFunction(e){return"function"==typeof e}isObject(e){return e&&"object"==typeof e}apply(e,t,r){if(r&&this.apply(e,r),e&&t&&this.isObject(t))for(var n in t)this.isArray(t[n])?e[n]=this.clone(t[n]):this.isObject(t[n])?this.apply(e[n]=e[n]||{},t[n]):e[n]=t[n];return e}clone(e){return this.isArray(e)?e.slice(0):this.isObject(e)&&e.clone?e.clone():this.isObject(e)?Object.keys(e).reduce((t,r)=>(t[r]=this.clone(e[r]),t),{}):e}join(e,t,r){return e.reduce((e,r)=>e.append(r[t||"id"]),[]).join(void 0===r?"-":r||"")}createStringBuilder(e){return{value:e||"",append:function(e){return this.value=this.value+e,this},appendLine:function(e){return this.value=this.value+(e||"")+"\n",this}}}$(e,t){var r=document.getElementById(e);if(r)return r;let n;return n=t?t.querySelectorAll(e):document.querySelectorAll(e),n.length?n.toArray():null}build(e,t,r){let n=this.isString(t)?{innerHTML:t}:t,i=this.apply(document.createElement(e),n);return r?i.firstElementChild:i}parseQueryString(){return location.search.slice(1).split("&").reduce((e,t)=>(e[t.split("=")[0]]=t.split("=")[1]||"",e),{})}config(e){return{write:function(t,r){return localStorage.setItem("{0}.{1}".format(e,t),r),this},read:function(t){return localStorage.getItem("{0}.{1}".format(e,t))}}}getValue(e,t){return e.split(/\.|\[|\]/).reduce((function(e,t){if(""===t)return e;if("this"===t)return e;let r=t,n=t.indexOf("|")>-1,i=[];if(n){let e=String.trimValues(t.split("|"));r=e[0],i=String.trimValues(e[1].split(","))}let a=e[r];return void 0===a&&e.outerScope&&(a=o.getValue(r,e.outerScope)),null!=a?n?a.__proto__[i[0]].apply(a,i.slice(1)):a:e===self?"":self}),t||self)}};String.leftPad=function(e,t,r){var n=""+e;for(null!=r&&""!==r||(r=" ");n.length<t;)n=r+n;return n},String.trimValues=function(e){return e.map(e=>e.trim())},String.prototype.format=function(...e){var t=e[e.length-1]||self,r=function(e,r,n){var i=String.trimValues(r).reduce((function(e,r){return e.push("@"==r.charAt(0)?o.getValue(r.slice(1),t):r),e}),n);return e.apply(t,i)};return this.replace(/\{(\d+|[^{]+)\}/g,(function(n,i){let a,[s,l]=String.trimValues(i.split(":"));if(/^\d+/.test(s)){let r=String.trimValues(s.split("|")),n=~~r[0],i=0==r.length?"data":["data"].concat(r.slice(1)).join("|"),l={data:e[n],outerScope:t};a=o.getValue(i,l)}else a=o.getValue(s,t);if(o.isFunction(a))return r(a,l?l.split(/\s|\;/):[],[]);if(l){let[e,n]=String.trimValues(l.split(/=>/));return r(o.getValue(e,t),n?n.split(/\s|\;/):[],[a])}return a}))},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},String.prototype.fixDate=function(){return this.split(" ")[0]},String.prototype.fixTime=function(){return this.split(" ")[1]},String.prototype.fixYear=function(){return this.fixDate().split("/")[2]},String.prototype.paddingLeft=function(e){return(e+this).slice(-e.length)},String.prototype.merge=function(e){return this.replace(/{([^{]+)?}/g,(function(t,r){if(r.indexOf(":")>0){var n=r.split(":");return o.getValue(n[0],e)(o.getValue(n[1],e),e)}var i=o.getValue(r,e);return"function"==typeof i?i(e):i}))},String.prototype.toXmlDocument=function(){return(new DOMParser).parseFromString(this,"text/xml")},String.prototype.htmlDecode=function(){return(new DOMParser).parseFromString(this,"text/html").documentElement.textContent},Array.prototype.remove=function(e){var t=this.indexOf(e);return-1!=t&&this.splice(t,1),this},Array.prototype.add=function(e){return this.push(e),e},Array.prototype.append=function(e){return this.push(e),this},Array.prototype.select=function(e){return o.isString(e)?this.map((function(t){return t[e]})):this.map(e)},Array.prototype.item=function(e,t,r){return this.filter(r=>r[e]==t)[0]||r},Array.prototype.contains=function(e,t){return this.item(e,t)},Array.prototype.lastItem=function(){return this[this.length-1]},Array.prototype.where=function(e){return o.isFunction(e)?this.filter(e):o.isObject(e)?this.filter(new Function("a",Object.keys(e).reduce((function(t,r,n){return t+(n>0?" && ":"")+((i=e[r])instanceof RegExp?"{1}.test(a.{0})".format(r,i):o.isString(i)?"a.{0} === '{1}'".format(r,i):"a.{0} === {1}".format(r,i));var i}),"return "))):this},Array.prototype.sortBy=function(e,t){var r=[],n=e.split(",").map((function(e,t){var n=e.split(" ");return r[t]=n[1]&&"DESC"==n[1].toUpperCase()?-1:1,n[0]}));return r[0]=t?-1:1,this.sort((function(e,t){var i=0,o=function(e,t){var a=e[n[i]],s=t[n[i]];return a<s?-1*r[i]:a>s?1*r[i]:++i<n.length?o(e,t):0};return o(e,t)})),this},Array.prototype.orderBy=function(e){var t=o.isString(e)?function(t){return t[e]}:e;return this.map((function(e){return e})).sort((function(e,r){var n=t(e),i=t(r);return n<i?-1:n>i?1:0}))},Array.prototype.distinct=function(e=""){var t=o.isString(e)?function(t){return e?t[e]:t}:e,r=[];return this.forEach(e=>{var n=t(e);-1==r.indexOf(n)&&r.push(n)}),r},Array.prototype.groupBy=function(e){return this.reduce((function(t,r){var n=r[e];return(t[n]=t[n]||[]).push(r),t}),{})},Array.prototype.toGroupWrapper=function(e){var t=this,r=function(n,i,o){return e[o]={},t.distinct((function(e){return e[n]})).forEach((function(r){e[o][r]=t.reduce((function(e,t){return t[n]==r?e+t[i]:e}),0)})),r};return r},Array.prototype.sum=function(e){return this.reduce((function(t,r){return t+r[e]}),0)},Array.prototype.toDictionary=function(e,t){return this.reduce((function(r,n){return r[n[e]]=t?n[t]:n,r}),{})},NodeList.prototype.toArray=function(){return Array.from(this)};let a=new Map,s=-1;var l={subscribe:function(e,t){a.has(e)||a.set(e,[]);var r=(++s).toString();return a.get(e).push({token:r,func:t}),r},publish:function(e,...t){return!!a.has(e)&&(setTimeout((function(){for(var r=a.get(e),n=r?r.length:0;n--;)r[n].func(e,...t)}),0),!0)},unsubscribe:function(e){for(var t in a.keys){let i=a.get(t);if(i)for(var r=0,n=i.length;r<n;r++)if(i[r].token===e)return i.splice(r,1),e}return!1},TOPICS:{VIEW_CHANGE:"view:change",VALUE_CHANGE:"value:change",MUNICIPIO_CHANGE:"municipio:change",WINDOW_SCROLL:"window.scroll",WINDOW_RESIZE:"window.resize",NOTIFICATION:"notification.show"}};const c=["[on-click]","[on-publish]","[route-link]","[on-change]"];function u(e,t,r){let n={innerHTML:(e,t)=>e.innerHTML=t,className:(e,t)=>e.className=t};c.forEach((i,a)=>{e.querySelectorAll(i).toArray().concat([e]).forEach(e=>{let s=i.replace("[","").replace("]","");if(!e.attributes.getNamedItem(s))return;let c=e.attributes.getNamedItem(s).value,u=c.split(":");if(0!==a){if(1===a){let i=o.getValue(u[0],l);i=i===window?u[0]:i,l.subscribe(i,(i,a)=>{let s=u[1];if(s){let i=n[s]||t[s]||o.getValue(s,r);i&&i.apply(r,[e,a])}else n.innerHTML(e,a)})}if(2===a&&(e.onclick=function(e){return!1}),3===a){let n="SELECT"===e.tagName;if("publish"===c)return void(n?e.onchange=()=>l.publish(l.TOPICS.VALUE_CHANGE,e):e.oninput=()=>l.publish(l.TOPICS.VALUE_CHANGE,e));let i=t[c]||o.getValue(c,r);n?e.onchange=()=>i.apply(r,[e]):e.oninput=()=>i.apply(r,[e]),e.onblur=()=>i.apply(r,[e])}}else{let n=t[u[0]]||o.getValue(u[0],r);e.onclick=t=>{let i=u.slice(1).reduce((function(e,t){return e.push("@"==t.charAt(0)?o.getValue(t.slice(1),r):t),e}),[e,t]);return n.apply(r,i)}}})})}var d=r(1),p=r.n(d);class f{}f.APP_CONFIG_NAME="ts-app",f.COLORS={GOLD:"Gold",SILVER:"Silver",BRONZE:"Bronze"};class h{constructor(){var e,t;this._config=o.config(f.APP_CONFIG_NAME),this._document={name:"Valor inicial"},this._commandManager=(e=this._document,t={getDocument:()=>e,undos:new Array,redos:new Array,clear:function(){t.undos.length=0,t.redos.length=0},executeCommad:function(r){try{t.undos.push(r.execute(e)),t.redos.length=0}catch(e){console.error(e)}},undo:function(){t.undos.length>0&&t.redos.push(t.undos.pop().undo(e))},redo:function(){t.redos.length>0&&t.undos.push(t.redos.pop().execute(e))}}),this._config.write("CommandsView",Date.now.toString())}render(e){this._content=o.build("div",{innerHTML:p.a},!0),e.innerHTML="",e.appendChild(this._content),u(e,{doCommand:()=>{console.log(this._document.name),this._commandManager.executeCommad(function(){let e={bak:"",execute:function(t){return this.bak=t.name,t.name=t.name.toUpperCase(),e},undo:function(t){return t.name=this.bak,e}};return e}()),console.log(this._document.name),this._commandManager.undo(),console.log(this._document.name),this._commandManager.redo(),console.log(this._document.name)}},{})}}var g=r(2),m=r.n(g);class v{constructor(){this._config=o.config(f.APP_CONFIG_NAME),this._config.write("PubSubView",Date.now.toString())}render(e){this._content=o.build("div",{innerHTML:m.a},!0),e.innerHTML="",e.appendChild(this._content),u(e,{doPublish:function(){l.publish(l.TOPICS.NOTIFICATION,"Botón doPublish"),setTimeout((function(){l.publish(l.TOPICS.NOTIFICATION,"")}),2e3)}},{})}}var y=r(3),b=r.n(y),w={get:function(e,t){return new Promise((r,n)=>{var i=w.createXMLHttpRequest();i.open("GET",e,!0),t&&t(i),i.onreadystatechange=function(){4==i.readyState&&r(i.responseText)},i.onerror=function(e){n(e)},i.send(null)})},post:function(e,t,r){return new Promise((n,i)=>{var o=w.createXMLHttpRequest();o.open("POST",e,!0),r?r(o):o.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset:ISO-8859-1"),o.onreadystatechange=function(){4==o.readyState&&n(o.responseText)},o.send(t)})},callWebMethod:function(e,t,r){var n=w.createXMLHttpRequest();n.open("POST",e,!0),n.onreadystatechange=function(){4==n.readyState&&r(n.responseText)},n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.send(t)},createXMLHttpRequest:function(){return new XMLHttpRequest}};class _{constructor(){this.BS={}}generateReport(e,t,r){var n=this;r.clear(),r.message({type:"report.begin"});var i=e,a=i.parseData?i.parseData(i,t,r.message):t;r.message({type:"report.log.message",text:"Inicializando..."});var s=function(e,t){t.BS=n.BS,r.send(e.format(t))};function l(){g.forEach((function(e,t){if(!(t<u))return r.message({type:"report.sections.group.header",value:e.id}),e.definition.header?s(e.definition.header,e):e.definition.headerValueProvider?r.send(e.definition.headerValueProvider(e)):void 0}))}function c(e){var t=g.map((function(e){return e}));e&&t.splice(0,e),t.reverse().forEach((function(e){return r.message({type:"report.sections.group.footer",value:e.id}),e.definition.footer?s(e.definition.footer,e):e.definition.footerValueProvider?r.send(e.definition.footerValueProvider(e)):void 0}))}var u=-1,d=function(){var e=JSON.parse(i.summary||"{}");return i.onInitSummaryObject?i.onInitSummaryObject(e):e}(),p=(i.sections||[]).where({type:"header"}),f=(i.sections||[]).where({type:"total"}),h=((i.sections||[]).where({type:"footer"}),i.details||[]),g=i.groups.map((function(e,t){return{name:"G"+(t+1),id:e.id,rd:i,definition:e,current:"",data:o.clone(d),init:function(e){var t=e[this.definition.key].toString(),r=n.BS[this.name];r.all[t]=r.all[t]||[],r.all[t].push(e),r.recordCount=1,!1!==this.__resume&&(this.__resume||(this.__resume=Object.keys(this.data).length>0))&&n.copy(e,this.data)},sum:function(e){var t=e[this.definition.key].toString(),r=n.BS[this.name];r.all[t]=r.all[t]||[],r.all[t].push(e),r.recordCount+=1,!1!==this.__resume&&n.sum(e,this.data)},test:function(e){return e[this.definition.key]==this.current}}}))||[];n.BS={reportDefinition:i,mediator:r},i.iteratefn&&(r.message({type:"report.log.message",text:"Inicializando elementos..."}),a.forEach(i.iteratefn)),i.orderBy&&(r.message({type:"report.log.message",text:"Ordenando datos..."}),a.sortBy(i.orderBy,!1)),n.BS={recordCount:0,G0:o.clone(d),dataSet:a,reportDefinition:i,mediator:r},g.forEach((function(e,t){e.current=a&&a[0]?a[0][e.definition.key]:"",n.BS[e.name]={recordCount:0,all:{}}})),i.onStartfn&&i.onStartfn(n.BS),[i.sections,i.details,i.groups].reduce((function(e,t){return e.concat(t)}),[]).map((function(e){e.valueProviderfn&&(e.valueProvider=o.getValue(e.valueProviderfn,{BS:n.BS}),delete e.valueProviderfn),e.footerValueProviderfn&&(e.footerValueProvider=o.getValue(e.footerValueProviderfn,{BS:n.BS}),delete e.footerValueProviderfn),e.headerValueProviderfn&&(e.headerValueProvider=o.getValue(e.headerValueProviderfn,{BS:n.BS}),delete e.headerValueProviderfn)})),r.message({type:"report.render.rows"}),r.message({type:"report.log.message",text:"Generando informe..."}),p.forEach((function(e){return r.message({type:"report.sections.header",value:e}),e.template?s(e.template,e):e.valueProvider?r.send(e.valueProvider(e)):void 0})),a.length>0&&l(),a.forEach((function(e,t){if(n.BS.recordCount++,n.BS.isLastRow=a.length===n.BS.recordCount,n.BS.isLastRowInGroup=n.BS.isLastRow,n.BS.percent=n.BS.recordCount/a.length*100,n.BS.previous=n.BS.data||e,n.BS.data=e,g.forEach((function(e,t){n.BS[e.name].data=Object.create(e.data)})),n.sum(e,n.BS.G0),i.onRowfn&&i.onRowfn(n.BS),r.message({type:"report.render.row",text:n.BS.percent.toFixed(1)+" %",value:n.BS.percent}),g.every((function(t){return t.test(e)}))?g.forEach((function(t){t.sum(e)})):(g.some((function(t,r){return!t.test(e)&&(c(u=r),g.forEach((function(t,n){n>=u?(t.init(e),u=r):t.sum(e)})),!0)})),g.forEach((function(t){t.current=e[t.definition.key]})),i.onGroupChangefn&&i.onGroupChangefn(n.BS),r.message({type:"report.sections.group.change",value:g}),l()),g.length&&!n.BS.isLastRow){var o=a[n.BS.recordCount];n.BS.isLastRowInGroup=!g.every((function(e){var t=e.definition.key;return o[t]===n.BS.data[t]}))}h.forEach((function(e){return r.message({type:"report.sections.detail",value:e.id}),e.template?s(e.template,e):e.valueProvider?r.send(e.valueProvider(e)):void 0}))})),a.length>0&&(n.BS.previous=n.BS.data,c()),f.forEach((function(e){return r.message({type:"report.sections.total",value:e.id}),e.template?s(e.template,e):e.valueProvider?r.send(e.valueProvider(e)):void 0})),r.message({type:"report.render.end"}),r.message({type:"report.end"}),r.flush()}merge(e,t){return e.replace(/{([^{]+)?}/g,(function(e,r){if(r.indexOf(":")>0){var n=r.split(":");return n[0]=o.getValue(n[0],t),n[1]=o.getValue(n[1],t),n[0](n[1],t)}var i=o.getValue(r,t);return"function"==typeof i?i(t):i}))}copy(e,t){Object.keys(t).map((function(r){t[r]=e[r]}))}sum(e,t){Object.keys(t).map((function(r){t[r]+=e[r]}))}compute(e,t){return e.reduce((function(e,r){return e+r[t]}),0)}group(e,t){var r=e,n=function(e,i){return r.distinct((function(t){return t[e]})).forEach((function(n){t[n]=r.reduce((function(t,r,o,a){return r[e]==n?t+r[i]:t}),0)})),n};return n}}var S={load:function(e){var t={sections:[],groups:[],details:[]},r={},n="",i="",o=!1;function a(e){return e&&e.trim().startsWith("@")?t[e.trim().split("@")[1].trim()]||"":e?e.trim():""}function s(e){for(var t=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,r={},n=t.exec(e);null!=n;)r[n[1].trim()]=a(n[2].trim().replace(/^'([^']*)'$/g,"$1")),n=t.exec(e);return r}return e.split("\n").forEach((function(e){!function(e,t){if(!n&&!e.trim())return function(){};var a;if(!/DEFINE|#|CREATE|SET|FUNCTION|END/.test(e)){if(n)return i+=t,i+="\n",function(){};throw new Error("Tabbly : Unrecognized text")}if(/^#/.test(e))return function(){};if(/^SET (\w.*)/.test(e)){var l=e.match(/^SET (\w.*)$/);return o=!0,n=l[1].trim(),i="",function(){}}if(/^FUNCTION (\w.*)/.test(e)){var l=e.match(/^FUNCTION (\w.*)$/);return o=!1,n=l[1].trim(),i="",function(){}}if(/^END/.test(e)){var c=i,u=n;return n=i="",o?(o=!1,function(e){r[u]=c.trim()}):function(e){e[u]=new Function("ctx",c)}}if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(e)){l=e.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/);return a=l,function(e){e[a[1].trim()]=a[2].trim()}}if(!/^CREATE\s\s*(\w*) (.*)$/.test(e))throw new Error("Tabbly : Unrecognized text after DEFINE");return"section"==(l=e.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var e=l;return function(t){t.sections.push(s(e[2])),r=t.sections[t.sections.length-1]}}():"group"==l[1]?function(){var e=l;return function(t){t.groups.push(s(e[2])),r=t.groups[t.groups.length-1]}}():"detail"==l[1]?function(){var e=l;return function(t){t.details.push(s(e[2])),r=t.details[t.details.length-1]}}():void 0}(e.trim(),e)(t)})),t}},E=[];class x{constructor(){this._config=o.config(f.APP_CONFIG_NAME),this._config.write("TabblyReportsJsView",Date.now.toString()),this._content=o.build("div",{innerHTML:b.a},!0)}render(e){e.innerHTML="",e.appendChild(this._content),u(e,{},{}),this.__loadReport(this._content.querySelector("[report-container]"))}__loadReport(e){var t,r={buffer:"",send:function(e){this.buffer+=e},message:function(e){},flush:function(){},clear:function(){this.buffer=""}};(t="./js/pro-0001.js",new Promise(e=>{if(E.indexOf(t.toLowerCase())>-1)e();else{var r=document.createElement("script");r.type="text/javascript",r.onload=function(){E.push(t.toLowerCase()),e((function(){document.getElementsByTagName("head")[0].removeChild(r),E.remove(t.toLowerCase())}))},r.src=t,document.getElementsByTagName("head")[0].appendChild(r)}})).then(t=>{var n=window.__reportDefinition(S,o);w.get("./js/data/proveedores.json").then(i=>{r.clear(),(new _).generateReport(n,JSON.parse(i),r),e.append(o.build("div",{innerHTML:r.buffer})),u(e,{},n.getContext()),t()})})}}var T=r(4),I=r.n(T);class A{constructor(){this._config=o.config(f.APP_CONFIG_NAME),this._config.write("TabblyReportsV2View",Date.now.toString()),this._content=o.build("div",{innerHTML:I.a},!0)}render(e){e.innerHTML="",e.appendChild(this._content),u(e,{},{}),this.__loadReport(this._content.querySelector("[report-container]"))}__loadReport(e){var t={buffer:"",send:function(e){this.buffer+=e},message:function(e){},flush:function(){},clear:function(){this.buffer=""}};w.get("./js/pro-0001-v2.txt").then(r=>{var n=S.load(r);w.get("./js/data/proveedores.json").then(r=>{(new _).generateReport(n,JSON.parse(r),t),e.append(o.build("div",{innerHTML:t.buffer})),u(e,{},n.getContext())})})}}function O(e,t,r){var n=function(e,n,i){var a=String.trimValues(n).reduce((function(e,r){return e.push("@"==r.charAt(0)?o.getValue(r.slice(1),t):r),e}),i);return r&&a.push(r),e.apply(t,a)};return e.replace(/{([^{]+)?}/g,(function(e,r){if(r.indexOf(":")>0){let e=String.trimValues(r.split(":")),i=o.getValue(e[0],t),[a,s]=String.trimValues(e[1].split(/=>/)),l=s?String.trimValues(s.split(/\s|\;/)):[];return n(o.getValue(a,t),l,[i])}let[i,a]=String.trimValues(r.split(/=>/));var s=o.getValue(i,t);return o.isFunction(s)?n(s,a.split(/\s|\;/),[]):s}))}function C(e,t){var r=e,n=r.querySelectorAll("[xfor]").toArray(),i=n.reduce((e,t)=>e.concat(o.$("[xbind]",t)),[...n]),a=r.querySelectorAll("[xbind]").toArray().filter(e=>!i.includes(e));return r.attributes.getNamedItem("xbind")&&a.push(r),a.forEach((function(e){if(e.attributes.getNamedItem("xif")){let r=new Function("ctx","return {0};".format(e.attributes.getNamedItem("xif").value).replaceAll("@","this."));e.style.display=r.apply(t)?"":"none"}o.toArray(e.attributes).where({value:/{[^{]+?}/g}).map(e=>e.value=O(e.value,t)),o.toArray(e.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach(e=>e.textContent=O(e.textContent,t,e)),String.trimValues(e.attributes.getNamedItem("xbind").value.split(";")).forEach((function(r){if(""===r)return;let[n,i]=String.trimValues(r.split(":")),[a,s]=String.trimValues(i.split(/=>/));var l=o.getValue(a,t);if(o.isFunction(l)){var c=String.trimValues(s.split(/\s|#/)).reduce((function(e,r){return e.push("@"==r.charAt(0)?o.getValue(r.slice(1),t):r),e}),[]);c.push(e),l=l.apply(t,c)}n&&(e[n]=l)}))})),n.map(e=>{let[r,n]=String.trimValues(e.attributes.getNamedItem("xfor").value.split(" in ")),i=o.getValue(n,t);return i&&i!=window&&i.map((n,i)=>{let a={index:i,outerScope:t};a[r]=o.clone(n);let s=C(e.cloneNode(!0),a);e.parentNode.insertBefore(s,e)}),e}).forEach(e=>e.parentNode.removeChild(e)),e}class P{constructor(){this.BS={},this.module_ReportEngine_Copy=function(e,t){for(var r in t)if(t.hasOwnProperty(r)){if(e.hasOwnProperty(r)){t[r]=e[r];continue}if("_max_"===r||"_mim_"===r){var n=t[r];for(var i in n)n.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(n[i]=e[i])}if("_values_"===r){var o=t[r];for(var i in o)o.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(o[i]=[e[i]])}}},this.module_ReportEngine_Sum=function(e,t){for(var r in t)if(t.hasOwnProperty(r)){if(e.hasOwnProperty(r)){t[r]+=e[r];continue}if("_max_"===r||"_min_"===r){var n=t[r];for(var i in n)n.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(n[i]="_max_"==r?e[i]>n[i]?e[i]:n[i]:e[i]<n[i]?e[i]:n[i])}if("_values_"===r){var o=t[r];for(var i in o)o.hasOwnProperty(i)&&e.hasOwnProperty(i)&&o[i].add(e[i])}}}}__cloneRowTemplate(e){var t=e.cloneNode(!0);return e.parentNode.parentNode.deleteRow(e.rowIndex),t}__fillTemplate(e,t){var r=e.querySelectorAll("[xbind]").toArray();return e.attributes.getNamedItem("xbind")&&r.push(e),r.forEach(e=>{o.toArray(e.attributes).where({value:/{[^{]+?}/g}).map(e=>e.value=O(e.value,t)),o.toArray(e.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach(e=>e.textContent=O(e.textContent,t,e)),String.trimValues(e.attributes.getNamedItem("xbind").value.split(";")).forEach(r=>{if(""!==r){var n=String.trimValues(r.split(":")),i=String.trimValues(n[1].split(/\s|\,/)),a=o.getValue(i[0],t);if(o.isFunction(a)){var s=i.slice(1).reduce((e,r)=>(e.push("@"==r.charAt(0)?o.getValue(r.slice(1),t):r),e),[t,e]);a=a.apply(t,s)}else if(i[1]){a=o.getValue(i[1],t)(a,i[2],t,e)}e[n[0]]=a}})}),e}__mergeTemplate(e,t,r,n){if(e.forEach)return e.forEach((e,i)=>{this.__mergeTemplate(e,t,r[i],n)});this.__fillTemplate(e,{BS:this.BS}),r.tag||"nofooter"==r.tag||(t.append(e.outerHTML.replace(/xbind="[^"]*"/g,"")),n&&n({sb:t,section:r}))}module_ReportEngine_processAll(e){var t=document.createDocumentFragment();if(t.appendChild(o.build("div",{innerHTML:e.ReportTemplate},!1)),e.DetailTemplate=this.__cloneRowTemplate(t.querySelector(e.DetailTemplateSelector)),e.HideTotal){var r=t.querySelector(e.TotalTemplateSelector);r.parentNode.removeChild(r)}else e.TotalTemplate=this.__cloneRowTemplate(t.querySelector(e.TotalTemplateSelector));e.GroupsTemplates=[],e.GroupsTemplates=e.Grupos.map(e=>this.__cloneRowTemplate(t.querySelector(e.selector)));var n=this,i=-1;function a(){e.Grupos.forEach((t,r)=>{if(!(r<i)){var a=e.Grupos[r];if(a.header){var l=o.getValue(a.header,n)(a.current,a.name);"hidden;"!=l&&(l.text?s.append("<tr {0}>{1}</tr>".format(l.attributes,l.text)):l.row?n.BS.reportDefinition.dom_tbody.appendChild(l.row):s.append('<tr class="group-header">{0}</tr>'.format(l))),e.RepeatHeadersAfter==r&&e.RepeatHeaders.forEach((function(t){""!=t&&s.append(e.Headers[t].html)}))}}})}var s=o.createStringBuilder("");if(e.OnStart(e.DataSet),e.DataSet.forEach((t,r)=>{0==r&&a(),e.OnRow(t),e.Grupos.every((function(e){return e.test(t)}))?e.Grupos.forEach((function(e){e.sum(t)})):(e.Grupos.some((r,n)=>{if(!r.test(t)){i=n;var o=e.GroupsTemplates.map((function(e){return e}));o.splice(0,n),o.reverse();var a=e.Grupos.map((function(e){return e}));return a.splice(0,n),a.reverse(),this.__mergeTemplate(o,s,a,e.OnGroupFooter),e.Grupos.forEach((e,r)=>{r>=n?(e.init(t),i=n):e.sum(t)}),!0}return!1}),e.OnRowEnd(t),a()),e.HideDetail||this.__mergeTemplate(e.DetailTemplate,s,{name:"detail"},e.g)}),e.DataSet.length>0){this.BS.previous=this.BS.data;var l=e.GroupsTemplates.map((function(e){return e}));l.reverse(),e.HideTotal||l.push(e.TotalTemplate);var c=e.Grupos.map((function(e){return e}));c.reverse(),c.push({name:"summary"}),this.__mergeTemplate(l,s,c,e.OnGroupFooter)}return t.querySelector(e.ReportTableSelector).innerHTML.replace("<tbody>","<tbody>"+s.value)}fromReportDefinition(e,t,r){var n=this;this.BS={reportDefinition:e},e.Iteratefn&&t.forEach(e.Iteratefn),e.orderBy&&t.sortBy(e.orderBy,!1);var i=JSON.parse(e.summary||"{}");var a={DataSet:t,HideDetail:"true"==e.hideDetail||!1,HideTotal:0==e.groups.length||"true"==e.HideTotal||!1,ReportTemplate:e.html,ReportTableSelector:"#"+e.tableId,DetailTemplateSelector:"#"+e.details[0].id,TotalTemplateSelector:0==e.groups.length?"":"#"+e.groups.lastItem().id,Grupos:e.groups.where((function(t,r){return r<e.groups.length-1})).map((e,t)=>({name:"G"+(t+1),selector:"#"+e.id,key:e.key,tag:e.tag||"",current:"",header:e.header,data:o.clone(i),init:function(e){var t=e[this.key].toString(),r=n.BS[this.name];r.all[t]=r.all[t]||[],r.all[t].push(e),r.recordCount=1,n.module_ReportEngine_Copy(e,this.data)},sum:function(e){var t=e[this.key].toString(),r=n.BS[this.name];r.all[t]=r.all[t]||[],r.all[t].push(e),r.recordCount+=1,n.module_ReportEngine_Sum(e,this.data)},test:function(e){return e[this.key]==this.current}}))||[],OnGroupFooter:e.OnGroupFooter,Headers:e.headers,RepeatHeaders:(e.repeatHeader||"").split(","),RepeatHeadersAfter:e.repeatHeaderAfter,OnRow:t=>{n.BS.recordCount+=1,n.BS.previous=n.BS.data||t,n.BS.data=t,a.Grupos.forEach((e,t)=>{n.BS[e.name].data=Object.create(e.data)}),n.module_ReportEngine_Sum(t,n.BS.G0),e.onRowfn&&new Function("ctx",e.onRowfn)(this.BS)},OnStart:t=>{n.BS={recordCount:0,G0:o.clone(i),dataSet:t,reportDefinition:n.BS.reportDefinition},a.Grupos.forEach((e,r)=>{e.current=t&&t[0]?t[0][e.key]:"",n.BS[e.name]={recordCount:0,all:{}}}),e.onStartfn&&e.onStartfn(n.BS)},OnRowEnd:function(t){a.Grupos.forEach((function(e){e.current=t[e.key]})),e.onRowEndfn&&new Function("ctx",e.onRowEndfn)(n.BS)},PrintReport:e=>(e&&e(this.module_ReportEngine_processAll(a)),this)};return a.PrintReport(r)}}var B={load:function(e){var t={headers:[],groups:[],details:[]},r=[{columns:[]}],n="",i="";function o(e){return e&&e.trim().startsWith("@")?t[e.trim().split("@")[1].trim()]||"":e?e.trim():""}function a(e){for(var t=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,r={},n=t.exec(e);null!=n;)r[n[1].trim()]=o(n[2].trim().replace(/^'([^']*)'$/g,"$1")),n=t.exec(e);return r}function s(e){var t=a(e);return t.columns=[],t}function l(e){var t=[];return Object.keys(e).filter(t=>"columns"!=t&&"html"!=t&&e.hasOwnProperty(t)).forEach(r=>{var n="className"==r?"class":r;t.push('{0}="{1}"'.format(n,o(e[r])))}),t.length>0?" "+t.join(" "):""}function c(e,t){if(!n&&!e.trim())return function(){};var o;if(/^(DEFINE|#|ADD_COL|CREATE|FUNCTION|END)/.test(e)){if(/^#/.test(e))return function(){};if(/^FUNCTION (\w.*)/.test(e)){var l=e.match(/^FUNCTION (\w.*)$/);return n=l[1].trim(),i="",function(){}}if(/^END/.test(e)){var c=i,u=n;return n=i="",function(e){e[u]=new Function("ctx",c)}}if(/^ADD_COL /.test(e)){l=e.match(/ADD_COL (.*)$/);return o=l,function(e){r[r.length-1].columns.push(a(o[1]))}}if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(e)){l=e.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/);return function(){var e=l;return function(t){t[e[1].trim()]=e[2].trim()}}()}if(/^CREATE\s\s*(\w*) (.*)$/.test(e))return"header"==(l=e.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var e=l;return function(t){t.headers.push(s(e[2])),r=t.headers}}():"group"==l[1]?function(){var e=l;return function(t){t.groups.push(s(e[2])),r=t.groups}}():"detail"==l[1]?function(){var e=l;return function(t){t.details.push(s(e[2])),r=t.details}}():function(){var e=l;return function(t){t[e[1]]=e[2]}}();throw new Error("Tabbly : Unrecognized text after DEFINE")}if(n)return i+=t,i+="\n",function(){};throw new Error("Tabbly : Unrecognized text")}return e.split("\n").forEach((function(e){c(e.trim(),e)(t)})),t.html=function(){function e(e,t,r){var n="",i=r?"th":"td";return(e||[]).forEach((e,r)=>{var a="";a+="\n      <tr{0}>".format(l(e)),e.columns.forEach((e,t)=>{a+="\n        <{2}{0}>{1}</{2}>".format(l(e),o(e.html),i)}),a+="\n      </tr>",e.html=a,t&&t.indexOf(r.toString())>-1||(n+=a)}),n}return'<div id="{3}">\n  <table class= "w3-table-all" style = "width:100%;" id="table-{3}" >\n     <thead>{0}    </thead>\n    <tbody>{1}{2}    </tbody>\n  </table>\n</div>'.format(e(t.headers,(t.hiddenHeaders||"").split(","),!0),e(t.details),e(t.groups),t.tableId||"")}(),t}},N=r(5),V=r.n(N);class k{constructor(){this._config=o.config(f.APP_CONFIG_NAME),this._config.write("TabblyReportsView",Date.now.toString()),this._content=o.build("div",{innerHTML:V.a},!0)}render(e){e.innerHTML="",e.appendChild(this._content),u(e,{},{}),this.__loadReport(this._content.querySelector("[report-container]"))}__loadReport(e){w.get("./js/pro-0001.txt").then(t=>{var r=B.load(t);w.get("./js/data/proveedores.json").then(t=>{(new P).fromReportDefinition(r,JSON.parse(t),t=>{e.append(o.build("div",{innerHTML:t},!0)),u(e,{},r.getContext())})})})}}class R{constructor(){}static getWrapper(e){let t=document.getElementById(e),r={container:t,title:t.querySelector(".js-title"),body:t.querySelector(".js-content"),closeButton:t.querySelector(".js-close-button"),acceptButton:t.querySelector(".js-accept-button"),close:function(){return t.style.display="none",r},show:function(e){return e&&(r.acceptButton.onclick=()=>{e(r)}),t.style.display="block",r},init:function(e){return e&&e(r),r},setTitle:e=>(r.title.innerHTML=e,r),setBody:e=>(e.tagName?(r.body.innerHTML="",r.body.appendChild(e)):r.body.innerHTML=e,r),disableClickOutside:()=>(r.container.onclick=()=>{},r)};return r.acceptButton.onclick=r.close,r.closeButton.onclick=r.close,r.container.onclick=e=>{e.target===r.container&&r.close()},r}}class D{static paginate(e,t=1,r=10,n){let i=Math.ceil(e.length/r);t<1?t=1:t>i&&(t=i);let o=(t-1)*r,a=Math.min(o+r-1,e.length-1);return{totalItems:e.length,currentPage:t,pageSize:r,totalPages:i,startIndex:o,endIndex:a,allItems:e,visibleItems:e.slice(o,a+1),title:n,getChecked:()=>e.where({__checked:!0}).map((t,r)=>({index:e.indexOf(t),item:t}))}}}var L=r(6),M=r.n(L);class H{constructor(){this._sortBy="",this._desc=!1,this.proveedores=[],this.current={_id:0,_nif:"",_nombre:"",_descripcion:"",_fechaDeAlta:""},this.proveedores=[],this.paginationInfo=D.paginate(this.proveedores,1,4,""),this.paginationInfo.title="Proveedores: Cargando datos..."}renderTo(e){return e.appendChild(o.build("div",{innerHTML:M.a},!0)),this._header=e.querySelector("[header]"),this._tbody=e.querySelector("table tbody"),this._tr_template=e.querySelector("table tbody tr"),this._tbody.removeChild(this._tr_template),u(e,{doAction:(e,t,r,n)=>{this.doAction({name:r,data:n})},doGoToPage:(e,t)=>{this.doAction({name:"page",data:e.value})},doSearch:(e,t)=>{this.doAction({name:"search",data:e.value})},doSort:(e,t)=>{let r=["_id","_nif","_nombre","_descripcion","_fechaDeAlta"][t.target.cellIndex-1];this.doSort(r)}},{}),this}loadData(){this.syncTitle(),w.get("js/data/proveedores.json").then(e=>{this._sortBy="_nombre",this.proveedores=JSON.parse(e).orderBy(this._sortBy),this.goToPage("first")})}goToPage(e){var t=~~e;"current"===e&&(t=this.paginationInfo.currentPage),"first"===e&&(t=1),"previous"===e&&(t=Math.max(this.paginationInfo.currentPage-1,1)),"next"===e&&(t=Math.min(this.paginationInfo.totalPages,this.paginationInfo.currentPage+1)),"last"===e&&(t=this.paginationInfo.totalPages),this.paginationInfo=D.paginate(this.proveedores,t,4,""),this.syncTable()}syncTable(){this.syncTitle(),this._tbody.innerHTML="",this._tbody.appendChild(this._tr_template.cloneNode(!0)),this.paginationInfo.fn={checked:(e,t)=>e.__checked?"checked":""},u(C(this._tbody,this.paginationInfo),{doAction:(e,t,r,n)=>{this.doAction({name:r,data:n})},doAddToFavorites:(e,t,r,n)=>{console.log("Current -> Id : {_id}, Nif : {_nif}".merge(this.proveedores[0])),console.log(this.proveedores.select("_id")),console.log("Add to favorites {0}, {1}".format(1,2))}},{})}syncTitle(){let e=this.paginationInfo.totalItems,t=this.paginationInfo.getChecked().length,r="Proveedores: {0} elementos".format(e),n=" ({0} seleccionados)".format(t);this.paginationInfo.title=t?r+n:r,C(this._header,this.paginationInfo)}goToPageOf(e){let t=this.proveedores.indexOf(e);if(t>-1){let e=Math.floor(t/this.paginationInfo.pageSize);this.goToPage((e+1).toString())}}doSort(e){this._sortBy&&this._sortBy==e?this._desc=!this._desc:this._desc=!1,this._sortBy=e,this.proveedores=this.proveedores.sortBy(e,this._desc),this.goToPage("first")}doAction(e){if("page"===e.name)return this.goToPage(e.data);if("first"===e.name||"previous"===e.name||"next"===e.name||"last"===e.name)return this.goToPage(e.name);if("check-item"===e.name){let t=this.paginationInfo.visibleItems[e.data];t.__checked=!t.__checked,this.syncTitle()}if("delete"===e.name)return this.delete();if("new"===e.name)return this.insert();if("edit"===e.name){let e=this.paginationInfo.getChecked();if(0==e.length)return;return this.edit(e[0].item)}if("edit-row"===e.name){let t=~~e.data,r=this.proveedores.where({_id:t})[0];return this.edit(r)}return"search"===e.name?e.data?(this.proveedores=this.proveedores.where(t=>t._nombre.toLowerCase().includes(e.data.toLowerCase())),this.goToPage("first")):this.loadData():void 0}delete(){let e=this.paginationInfo.getChecked();if(0==e.length)return;let t=e[0].item;R.getWrapper("dialog-container").setTitle("Borrar proveedores").setBody("¿Está seguro de eliminar el proveedor seleccionado?").show(e=>{this.proveedores.remove(t),this.goToPage("current"),e.close()})}insert(){this._dialog=this._dialog||o.$("proveedor-edit-dialog"),this.current={_id:0,_nif:"",_nombre:"",_descripcion:"",_fechaDeAlta:""},C(this._dialog,this.current),R.getWrapper("dialog-container").setTitle("Nuevo vehículo").setBody(this._dialog).disableClickOutside().show(e=>{o.$("txt-nif").value,o.$("txt-nombre").value,o.$("txt-descripcion").value;let t={_id:56,_nif:"aaaa",_nombre:"rrr",_descripcion:"rrr",_fechaDeAlta:"01/02/2020"};this.current=t,this.proveedores.push(t),this.paginationInfo.visibleItems.push(t),this._dialog.style.display="none",e.close(),this.proveedores=this.proveedores.sortBy(this._sortBy,this._desc),this.goToPageOf(t)}),this._dialog.style.display="block"}edit(e){this._dialog=this._dialog||o.$("proveedor-edit-dialog"),this.current=e,R.getWrapper("dialog-container").setTitle("Edición de proveedores").setBody(this._dialog).disableClickOutside().init(e=>{C(this._dialog,this.current)}).show(e=>{let t={_id:~~o.$("txt-id").value,_nif:o.$("txt-nif").value,_nombre:o.$("txt-nombre").value,_descripcion:o.$("txt-descripcion").value,_fechaDeAlta:""};this.current._nif=t._nif,this.current._nombre=t._nombre,this.current._descripcion=t._descripcion,this._dialog.style.display="none",e.close()}),this._dialog.style.display="block"}}var G=r(7),F=r.n(G);class j{constructor(){this._config=o.config(f.APP_CONFIG_NAME),this._config.write("TablesView",Date.now.toString()),this._content=o.build("div",{innerHTML:F.a},!0)}render(e){e.innerHTML="",e.appendChild(this._content),u(e,{},{});let t=this._content.querySelector("[table-container]");(new H).renderTo(t).loadData()}}!function(e){const t=o.config(f.APP_CONFIG_NAME);e.innerHTML=i.a,u(e,{openLink:function(e,t,r){document.querySelectorAll(".city").toArray().forEach(e=>e.style.display=e.id==r?"block":"none"),document.querySelectorAll(".tablink").toArray().forEach(e=>e.classList.remove("w3-red")),e.className+=" w3-red";let n=o.$(r);"VIEW-COMMANDS"==r&&(new h).render(n),"VIEW-PUB-SUB"==r&&(new v).render(n),"VIEW-TABLES"==r&&(new j).render(n),"VIEW-REPORTS"==r&&(new k).render(n),"VIEW-REPORTS-V2"==r&&(new A).render(n),"VIEW-REPORTS-JS"==r&&(new x).render(n)}},{}),t.write("LastUsed",Date.now.toString())}(document.getElementById("app-content"))}]);